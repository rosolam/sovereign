(this.webpackJsonpsovereign=this.webpackJsonpsovereign||[]).push([[0],{137:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=137},205:function(e,t,n){"use strict";(function(e){var r=n(3),a=n.n(r),s=n(15),c=n(63),i=n(64),o=n(23),u=n(58),l=n(206),j=n(245),b=Object(u.a)("ipfs"),h=function(){function t(e){Object(c.a)(this,t),this.canPut=!1,this.canGet=!1,Object.defineProperty(this,b,{writable:!0,value:void 0})}return Object(i.a)(t,[{key:"connect",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.server||(t={server:"/ip4/127.0.0.1/tcp/5001"}),Object(o.a)(this,b)[b]=j(t.server),e.prev=2,e.next=5,Object(o.a)(this,b)[b].id();case 5:return e.sent,this.canPut=!0,this.canGet=!0,this.connectionStatus={connect:!0,error:""},e.abrupt("return",this.connectionStatus);case 12:return e.prev=12,e.t0=e.catch(2),this.canPut=!1,this.canGet=!1,this.connectionStatus={connect:!1,error:e.t0},e.abrupt("return",this.connectionStatus);case 18:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getFile",value:function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s,c,i,u,j,h,p,d,f,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&this.canGet){t.next=2;break}return t.abrupt("return");case 2:t.prev=2,r=[],s=!0,c=!1,t.prev=6,u=Object(l.a)(Object(o.a)(this,b)[b].cat(n));case 8:return t.next=10,u.next();case 10:return j=t.sent,s=j.done,t.next=14,j.value;case 14:if(h=t.sent,s){t.next=21;break}p=h,r.push(e.from(p));case 18:s=!0,t.next=8;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(6),c=!0,i=t.t0;case 27:if(t.prev=27,t.prev=28,s||null==u.return){t.next=32;break}return t.next=32,u.return();case 32:if(t.prev=32,!c){t.next=35;break}throw i;case 35:return t.finish(32);case 36:return t.finish(27);case 37:return d=e.concat(r),f=new Blob([d]),g=window.URL.createObjectURL(f),t.abrupt("return",g);case 43:return t.prev=43,t.t1=t.catch(2),t.abrupt("return",null);case 46:case"end":return t.stop()}}),t,this,[[2,43],[6,23,27,37],[28,,32,36]])})));return function(e){return t.apply(this,arguments)}}()},{key:"putFile",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&this.canPut){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.arrayBuffer();case 4:return n=e.sent,e.next=7,Object(o.a)(this,b)[b].add(n);case 7:return r=e.sent,console.log("ipfs local node put",r),e.abrupt("return",r.cid.string);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}();t.a=h}).call(this,n(37).Buffer)},213:function(e,t,n){},214:function(e,t,n){},273:function(e,t){},281:function(e,t){},299:function(e,t){},300:function(e,t){},516:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(40),c=n.n(s),i=(n(213),n(13)),o=n(39),u=n(22),l=a.a.createContext(),j=(n(214),n(533)),b=n(534),h=n(539),p=n(202),d=n(535),f=n(201),g=n.n(f),O=n(1),x=function(){var e=Object(r.useContext)(l),t=Object(u.g)(),n=Object(r.useState)(""),a=Object(i.a)(n,2),s=a[0],c=a[1],o=Object(r.useState)(""),f=Object(i.a)(o,2),x=f[0],v=f[1],m=Object(r.useState)(""),y=Object(i.a)(m,2),w=y[0],k=y[1],I=Object(r.useState)(""),E=Object(i.a)(I,2),S=E[0],C=E[1],A=g()(w);return Object(O.jsx)("div",{className:"m-3",children:Object(O.jsxs)(j.a,{defaultActiveKey:"login",children:[Object(O.jsxs)(b.a,{eventKey:"login",title:"Log In",className:"border border-top-0 p-3",children:[Object(O.jsxs)(h.a.Group,{controlId:"formLoginUsername",children:[Object(O.jsx)(h.a.Label,{children:"Username"}),Object(O.jsx)(h.a.Control,{type:"text",placeholder:"username here",value:s,onChange:function(e){return c(e.target.value)}})]}),Object(O.jsxs)(h.a.Group,{controlId:"formLoginPassword",children:[Object(O.jsx)(h.a.Label,{children:"Password"}),Object(O.jsx)(h.a.Control,{type:"password",placeholder:"password here",value:w,onChange:function(e){return k(e.target.value)}})]}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",className:"m-1 d-block w-100",onClick:function(n){n.preventDefault(),s&&w?(e.businessLogic.login(s,w,!1),t.push("/")):alert("oops!")},children:"Login"})]}),Object(O.jsxs)(b.a,{eventKey:"createAccount",title:"Create Account",className:"border border-top-0 p-3",children:[Object(O.jsxs)(h.a.Group,{controlId:"formCreateName",children:[Object(O.jsx)(h.a.Label,{children:"Name"}),Object(O.jsx)(h.a.Control,{type:"text",placeholder:"Jane Smith",value:x,onChange:function(e){return v(e.target.value)}}),Object(O.jsx)(h.a.Text,{className:"text-muted",children:"This is how other users will see you online; You can change this later."})]}),Object(O.jsxs)(h.a.Group,{controlId:"formCreateUsername",children:[Object(O.jsx)(h.a.Label,{children:"Username"}),Object(O.jsx)(h.a.Control,{type:"text",placeholder:"smithj42",value:s,onChange:function(e){return c(e.target.value)}}),Object(O.jsx)(h.a.Text,{className:"text-muted",children:"This is is your user name to login, this cannot be changed."})]}),Object(O.jsxs)(h.a.Group,{controlId:"formCreatePassword",children:[Object(O.jsx)(h.a.Label,{children:"Password"}),Object(O.jsx)(h.a.Control,{type:"password",placeholder:"strong password here",value:w,onChange:function(e){return k(e.target.value)}}),Object(O.jsx)(h.a.Text,{children:Object(O.jsx)(d.a,{animated:!0,label:4==A.score?"strong":"weak",min:w?-1:0,max:"4",variant:4==A.score?"success":"danger",now:A.score})})]}),Object(O.jsxs)(h.a.Group,{controlId:"formCreateConfirmPassword",children:[Object(O.jsx)(h.a.Label,{children:"Confirm Password"}),Object(O.jsx)(h.a.Control,{type:"password",placeholder:"strong password here again",value:S,onChange:function(e){return C(e.target.value)}})]}),Object(O.jsx)(h.a.Group,{controlId:"formCreateCheckbox1",children:Object(O.jsx)(h.a.Check,{type:"checkbox",label:"I understand that there is no way to recover a lost password"})}),Object(O.jsx)(h.a.Group,{controlId:"formCreateCheckbox2",children:Object(O.jsx)(h.a.Check,{type:"checkbox",label:"I understand that words have power and that freedom comes with the price of accountability and tolerance"})}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",className:"m-1 d-block w-100",onClick:function(n){n.preventDefault(),s&&w?(console.log(e),e.businessLogic.createUser(s,w,x),t.push("/")):alert("oops!")},children:"Create Account"})]}),Object(O.jsx)(b.a,{eventKey:"about",title:"About",className:"border border-top-0 p-3",children:"What the heck is this all about?!"})]})})},v=n(540),m=n(207),y=n(538),w=function(e){var t=e.show,n=e.onClose,a=Object(r.useContext)(l),s=Object(r.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1];return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(y.a,{show:t,onHide:n,children:[Object(O.jsx)(y.a.Header,{closeButton:!0,children:Object(O.jsx)(y.a.Title,{children:"Follow User"})}),Object(O.jsx)(y.a.Body,{children:Object(O.jsxs)(h.a.Group,{controlId:"formUserAddress",children:[Object(O.jsx)(h.a.Label,{children:"User Address"}),Object(O.jsx)(h.a.Control,{type:"text",placeholder:"user's address...",value:o,onChange:function(e){return u(e.target.value)}})]})}),Object(O.jsxs)(y.a.Footer,{children:[Object(O.jsx)(p.a,{variant:"secondary",onClick:n,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),o?(a.businessLogic.followUser(o),n()):alert("Please provide a user id")},children:"Follow!"})]})]})})},k=n(27),I=n(110),E=function(e){var t=e.show,n=e.onClose,a=Object(r.useContext)(l),s=Object(r.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1],j=Object(r.useState)([]),b=Object(i.a)(j,2),d=b[0],f=b[1],g=Object(I.a)({accept:"image/*",onDrop:function(e){f(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),x=(g.acceptedFiles,g.getRootProps),v=g.getInputProps,m=d.map((function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:e.preview,width:"50px"})},e.name)}));Object(r.useEffect)((function(){return function(){d.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[d]);var w=Object(O.jsxs)("div",Object(k.a)(Object(k.a)({},x()),{},{className:"dropzone",children:[Object(O.jsx)("input",Object(k.a)({},v())),Object(O.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"}),Object(O.jsx)("div",{className:"d-flex",style:{flexWrap:"wrap"},children:m})]}));return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(y.a,{show:t,onHide:n,children:[Object(O.jsx)(y.a.Header,{closeButton:!0,children:Object(O.jsx)(y.a.Title,{children:"New Post"})}),Object(O.jsxs)(y.a.Body,{children:[Object(O.jsxs)(h.a.Group,{controlId:"formBasicEmail",children:[Object(O.jsx)(h.a.Label,{children:"Post"}),Object(O.jsx)(h.a.Control,{as:"textarea",rows:"5",placeholder:"your post...",value:o,onChange:function(e){return u(e.target.value)}})]}),Object(O.jsxs)(h.a.Group,{controlId:"formPictures",children:[Object(O.jsx)(h.a.Label,{children:"Pictures"}),w]})]}),Object(O.jsxs)(y.a.Footer,{children:[Object(O.jsx)(p.a,{variant:"secondary",onClick:n,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),o?(a.businessLogic.createPost({text:o},d),n()):alert("Please add text for your post")},children:"Post!"})]})]})})},S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAwRjA1MTczMTFGNDExRUFCRkEyOTY3MDRBRTIzQjQ2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAwRjA1MTc0MTFGNDExRUFCRkEyOTY3MDRBRTIzQjQ2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDBGMDUxNzExMUY0MTFFQUJGQTI5NjcwNEFFMjNCNDYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDBGMDUxNzIxMUY0MTFFQUJGQTI5NjcwNEFFMjNCNDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4bw32zAAALEElEQVR42uzd61Ib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",C=function(e){var t=e.show,n=e.onClose,a=Object(r.useContext)(l),s=Object(r.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1],j=Object(r.useState)(""),b=Object(i.a)(j,2),d=b[0],f=b[1],g=Object(r.useState)(),x=Object(i.a)(g,2),v=(x[0],x[1],Object(I.a)({accept:"image/*",onDrop:function(e){var t=e[0];f(URL.createObjectURL(t))}})),m=v.acceptedFiles,w=v.getRootProps,E=v.getInputProps;Object(r.useEffect)((function(){return function(){URL.revokeObjectURL(d)}}),[d]);var C=function(e){u(e?e.name:""),f(e?e.name:"")};Object(r.useEffect)((function(){a.businessLogic.getProfile(null,C)}),[]);var A=Object(O.jsxs)("div",Object(k.a)(Object(k.a)({},w()),{},{className:"ml-3 dropzone",children:[Object(O.jsx)("input",Object(k.a)({},E())),Object(O.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})),P=Object(O.jsx)("div",{className:"mx-4",children:"Note: You are unable to upload a profile picture at this time.  Please setup an IPFS service in Settings to enable distributed file sharing."});return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(y.a,{show:t,onHide:n,children:[Object(O.jsx)(y.a.Header,{closeButton:!0,children:Object(O.jsx)(y.a.Title,{children:"Update Profile"})}),Object(O.jsxs)(y.a.Body,{children:[Object(O.jsxs)(h.a.Group,{controlId:"formName",children:[Object(O.jsx)(h.a.Label,{children:"Name"}),Object(O.jsx)(h.a.Control,{type:"text",placeholder:"your name...",value:o,onChange:function(e){return u(e.target.value)}})]}),Object(O.jsxs)(h.a.Group,{controlId:"formPicture",children:[Object(O.jsx)(h.a.Label,{children:"Picture"}),Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("img",{src:d,style:{width:"75px",height:"75px"},onError:function(e){e.target.onerror=null,e.target.src=S}}),a.businessLogic.ipfsProvider.canPut&&A,!a.businessLogic.ipfsProvider.canPut&&P]})]})]}),Object(O.jsxs)(y.a.Footer,{children:[!a.businessLogic.ipfsProvider.canPut&&Object(O.jsx)(p.a,{variant:"warning",onClick:n,children:"Setup IPFS Now"}),Object(O.jsx)(p.a,{variant:"secondary",onClick:n,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),o?(a.businessLogic.updateProfile({name:o},m[0]),n()):alert("Please provide a name")},children:"Update"})]})]})})},A=function(e){var t,n=e.show,a=e.onClose,s=e.soul;Object(r.useContext)(l);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(y.a,{show:n,onHide:a,children:[Object(O.jsx)(y.a.Header,{closeButton:!0,children:Object(O.jsx)(y.a.Title,{children:"Sovereign Address"})}),Object(O.jsx)(y.a.Body,{children:Object(O.jsxs)(h.a.Group,{controlId:"formUserAddress",children:[Object(O.jsx)(h.a.Label,{children:"Address"}),Object(O.jsx)(h.a.Control,{ref:function(e){return t=e},as:"textarea",rows:"3",size:"md",value:s,readOnly:!0})]})}),Object(O.jsxs)(y.a.Footer,{children:[Object(O.jsx)(p.a,{variant:"secondary",onClick:a,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),t.select(),document.execCommand("copy"),a()},children:"Copy To Clipboard"})]})]})})},P=function(){var e=Object(r.useContext)(l),t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(!1),j=Object(i.a)(c,2),b=j[0],h=j[1],p=Object(r.useState)(!1),d=Object(i.a)(p,2),f=d[0],g=d[1],x=Object(r.useState)(!1),y=Object(i.a)(x,2),k=y[0],I=y[1],S=Object(u.g)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w,{show:a,onClose:function(){s(!1)}}),Object(O.jsx)(C,{show:b,onClose:function(){h(!1)}}),Object(O.jsx)(E,{show:f,onClose:function(){g(!1)}}),Object(O.jsx)(A,{show:k,onClose:function(){I(!1)},soul:e.businessLogic.mySoul}),Object(O.jsxs)(v.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(O.jsx)(v.a.Brand,{href:"#home",children:Object(O.jsx)("div",{className:"d-flex flex-column justify-content-center",style:{height:"50px"},children:"Sovereign"})}),Object(O.jsx)(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsx)(v.a.Collapse,{id:"responsive-navbar-nav",children:Object(O.jsxs)(m.a,{className:"ml-auto",children:[Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){g(!0)},children:"New Post"}),Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){s(!0)},children:"Follow Someone"}),Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){I(!0)},children:"Share My Address"}),Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){h(!0)},children:" Update My Profile"}),Object(O.jsx)(m.a.Link,{as:o.b,to:"/settings",children:"Settings"}),Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){e.businessLogic.logout(),S.push("/login")},children:"Logout"})]})})]})]})},L=function(e){var t=e.soul,n=Object(r.useContext)(l),a=(Object(u.h)().id,Object(r.useState)({name:"loading...",picture:""})),s=Object(i.a)(a,2),c=s[0],o=s[1],j=Object(r.useState)(),b=Object(i.a)(j,2),h=b[0],p=b[1],d=Object(r.useState)({unfollowed:!0,trusted:!1,mute:!1}),f=Object(i.a)(d,2),g=(f[0],f[1]),x=Object(r.useState)(),v=Object(i.a)(x,2),m=v[0],y=v[1],w=Object(r.useState)(""),k=Object(i.a)(w,2),I=k[0],E=k[1],C=Object(u.g)(),A=[];Object(r.useEffect)((function(){return console.log("setting profile event handler"),n.businessLogic.subscribeProfile(t,o,p,g,y,A),function(){console.log("dropping profile event handler"),A&&A.forEach((function(e){return e.off()}))}}),[]),Object(r.useEffect)((function(){return function(){URL.revokeObjectURL(h)}}),[h]);var P=[];Object(r.useEffect)((function(){if(m)return console.log("setting last post elapsed time event handler"),n.businessLogic.subscribeTimeElapsed(m.created,E,P),function(){console.log("dropping last post elapsed time event handler"),P&&P.forEach((function(e){return e.off()}))}}),[m]);return Object(O.jsxs)("div",{className:"profile d-flex",onClick:function(e){e.preventDefault(),C.push("/Feed/"+t)},children:[Object(O.jsx)("img",{className:"m-1 circle-image",height:"50",width:"50",src:h||"missing",onError:function(e){e.target.onerror=null,e.target.src=S}}),Object(O.jsxs)("div",{className:"d-flex flex-column flex-grow-1",children:[Object(O.jsxs)("div",{className:"d-flex flex-fill",children:[Object(O.jsx)("div",{style:{fontWeight:700,fontSize:"20px"},children:c.name}),Object(O.jsx)("div",{style:{marginLeft:"auto"},children:Object(O.jsx)("div",{className:"mr-2"})})]}),Object(O.jsxs)("div",{className:"d-flex flex-fill",children:[Object(O.jsx)("div",{className:"ellipsis",style:{width:225,fontWeight:700,fontSize:"12px"},children:m?m.text:""}),Object(O.jsx)("div",{className:"d-flex",style:{marginLeft:"auto"},children:Object(O.jsx)("div",{className:"mr-2",style:{fontWeight:700,fontSize:"12px"},children:I})})]})]})]})},N=function(){var e,t=Object(r.useContext)(l),n=Object(r.useState)([]),a=Object(i.a)(n,2),s=a[0],c=a[1];return Object(r.useEffect)((function(){return console.log("setting profiles event handler"),t.businessLogic.subscribeProfiles(c,e),function(){console.log("dropping profiles event handler")}}),[]),Object(O.jsx)("div",{className:"scrolling-wrapper",children:Object(O.jsx)("div",{className:"scrolling-content",children:s.map((function(e){return Object(O.jsx)(L,{soul:e.key},e.key)}))})})},F=function(){var e=Object(r.useContext)(l);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(P,{}),Object(O.jsx)(L,{soul:e.businessLogic.mySoul}),Object(O.jsx)(N,{})]})},R=n(3),B=n.n(R),G=n(15),T=n(536),M=function(){var e=Object(r.useContext)(l),t=Object(r.useState)(),n=Object(i.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(),o=Object(i.a)(c,2),u=o[0],d=o[1],f=Object(r.useState)(""),g=Object(i.a)(f,2),x=g[0],v=g[1],m=function(){var t=Object(G.a)(B.a.mark((function t(n){var r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),v("test"),t.next=4,e.businessLogic.setSetting("pinataApiKey",a);case 4:return t.next=6,e.businessLogic.setSetting("pinataApiSecret",u);case 6:return t.next=8,e.businessLogic.connectToPinata();case 8:r=t.sent,v(r?"ok":"bad");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"m-3",children:Object(O.jsxs)(j.a,{defaultActiveKey:"about",children:[Object(O.jsx)(b.a,{eventKey:"about",title:"About",className:"border border-top-0 p-3 scrolling-wrapper",style:{height:"75vh"},children:Object(O.jsxs)("div",{className:"scrolling-content m-1",children:[Object(O.jsx)("p",{children:"TLDR; To upload files, install IPFS on the computer you are browsing from or enter your Pinata API Keys on the next tab."}),Object(O.jsx)("hr",{}),Object(O.jsxs)("p",{children:["Since this is a distributed application a special method is needed to share files in a secure, distributed and uncesorable manner.  Let me introduce you to the ",Object(O.jsx)("a",{href:"https://ipfs.io/",target:"_new",children:"Interplanetary File System (IPFS)"}),"!"]}),Object(O.jsxs)("p",{children:["You can use your ",Object(O.jsx)("b",{children:"own"})," IPFS node by ",Object(O.jsx)("a",{href:"https://github.com/ipfs-shipyard/ipfs-desktop",target:"_new",children:"installing IPFS"})," on the desktop you are using to view this site right now; it will automatically be found and used by Sovereign!"]}),Object(O.jsxs)("p",{children:["Without your own node, or on a mobile device that isn't conducive to hosting a node, we need someone to add your files into IPFS for you.  Fortunately there are some options, like ",Object(O.jsx)("a",{href:"https://pinata.cloud/",target:"_new",children:"Pinata"})," that do just this!"]}),Object(O.jsx)("p",{children:"Sign up for a free account with them (1gb of storage for free), create an Admin API Key and enter the key codes on the next tab to enable file uploads!"})]})}),Object(O.jsxs)(b.a,{eventKey:"pinata",title:"Pinata",className:"border border-top-0 p-3",children:[Object(O.jsxs)(h.a.Group,{controlId:"formPinataKey",children:[Object(O.jsx)(h.a.Label,{children:"API Key"}),Object(O.jsx)(h.a.Control,{type:"text",placeholder:"0skl3332nkl43n4nx21d",value:a,onChange:function(e){return s(e.target.value)}})]}),Object(O.jsxs)(h.a.Group,{controlId:"formPinataSecret",children:[Object(O.jsx)(h.a.Label,{children:"API Secret"}),Object(O.jsx)(h.a.Control,{as:"textarea",rows:"3",placeholder:"n4p4fop3u1dpom5pomfi3h43opgfpn23mp3fmniop34nigfm23mdomp32fmopfm2",value:u,onChange:function(e){return d(e.target.value)}})]}),"ok"==x&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("p",{children:"Test Successful! Enjoy uploading files :)"})}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",className:"m-1 d-block w-100",children:"Close"})]}),"bad"==x&&Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsxs)("p",{children:["Test Failed, double check your API values and ensure the key is an ",Object(O.jsx)("b",{children:"Admin"})," Key"]})}),"test"==x&&Object(O.jsxs)(p.a,{variant:"primary",disabled:!0,type:"submit",className:"m-1 d-block w-100",children:[Object(O.jsx)(T.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mr-3"}),"Testing..."]}),(!x||"bad"==x)&&Object(O.jsx)(p.a,{variant:"primary",type:"submit",className:"m-1 d-block w-100",onClick:m,children:"Test"})]})]})})})},U=n(204),Q=n.n(U),Y=function(e){var t=e.path,n=Object(u.g)();return Object(O.jsx)(Q.a,{style:{fontSize:"30px",height:"50px"},onClick:function(e){e.preventDefault(),n.push(t)}})},H=function(e){var t=e.back,n=e.label,r=e.navs;return Object(O.jsxs)(v.a,{sticky:"top",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(O.jsxs)(v.a.Brand,{href:"#",className:"d-flex m-0 mr-1 align-items-center",children:[t&&Object(O.jsx)(Y,{path:t}),Object(O.jsx)("div",{className:"ml-2",children:n})]}),r&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsx)(v.a.Collapse,{id:"responsive-navbar-nav",children:Object(O.jsx)(m.a,{className:"ml-auto",children:r})})]})]})},D=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(H,{back:"/following/",label:"Settings",navs:null}),Object(O.jsx)(M,{})]})},W=function(e){var t=e.soul,n=Object(r.useContext)(l),a=Object(r.useState)({name:"loading...",picture:""}),s=Object(i.a)(a,2),c=s[0],o=s[1],j=Object(r.useState)(),b=Object(i.a)(j,2),h=b[0],p=b[1],d=Object(r.useState)({unfollowed:!0,trusted:!1,mute:!1}),f=Object(i.a)(d,2),g=(f[0],f[1]),x=Object(r.useState)(!1),y=Object(i.a)(x,2),k=y[0],I=y[1],P=Object(r.useState)(!1),L=Object(i.a)(P,2),N=L[0],F=L[1],R=Object(r.useState)(!1),B=Object(i.a)(R,2),G=B[0],T=B[1],M=Object(r.useState)(!1),U=Object(i.a)(M,2),Q=U[0],H=U[1],D=(Object(u.g)(),[]),W=n.businessLogic.isMine(t);Object(r.useEffect)((function(){return console.log("setting profile event handler",t),n.businessLogic.subscribeProfile(t,o,p,g,null,D),function(){console.log("dropping profile event handler"),D&&D.forEach((function(e){return e.off()}))}}),[]),Object(r.useEffect)((function(){return function(){URL.revokeObjectURL(h)}}),[h]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w,{show:k,onClose:function(){I(!1)}}),Object(O.jsx)(C,{show:N,onClose:function(){F(!1)}}),Object(O.jsx)(E,{show:G,onClose:function(){T(!1)}}),Object(O.jsx)(A,{show:Q,onClose:function(){H(!1)},soul:t}),Object(O.jsxs)(v.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(O.jsxs)(v.a.Brand,{href:"#",className:"d-flex m-0 mr-1",children:[Object(O.jsx)(Y,{path:"/Following"}),Object(O.jsxs)("div",{className:"d-flex",onClick:function(e){e.preventDefault(),alert("expand profile?")},children:[Object(O.jsx)("img",{className:"m-1 circle-image",height:"50",width:"50",src:h||"missing",onError:function(e){e.target.onerror=null,e.target.src=S}}),Object(O.jsx)("div",{className:"m-1 d-flex flex-wrap align-content-center",style:{fontWeight:700,width:"130px",fontSize:"15px",whiteSpace:"normal",overflowWrap:"anywhere"},children:c.name})]})]}),Object(O.jsx)(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsx)(v.a.Collapse,{id:"responsive-navbar-nav",children:Object(O.jsxs)(m.a,{className:"ml-auto",children:[W&&Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){T(!0)},children:"New Post"}),W&&Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){F(!0)},children:" Update My Profile"}),!W&&Object(O.jsx)(m.a.Link,{href:"#",children:"Trust"}),!W&&Object(O.jsx)(m.a.Link,{href:"#",children:"Unfollow"}),Object(O.jsx)(m.a.Link,{href:"#",onClick:function(){H(!0)},children:"Copy Address to Clipboard"})]})})]})]})},Z=n(91),z=n.p+"static/media/loading-attachment.a3139b43.gif",V=n(541),X=n(537),K=function(e){var t=e.soul,n=Object(r.useContext)(l),a=Object(r.useState)({text:"loading..."}),s=Object(i.a)(a,2),c=s[0],o=s[1],u=Object(r.useState)([]),j=Object(i.a)(u,2),b=j[0],h=j[1],p=Object(r.useState)({name:"loading...",picture:null}),d=Object(i.a)(p,2),f=d[0],g=d[1];Object(r.useEffect)((function(){return console.log("setting post event handler"),n.businessLogic.subscribePost(t,o,h,g),function(){console.log("dropping post event handler")}}),[]);var x=function(e){h((function(t){var n=t.find((function(t){return t.key==e})),r=Object(k.a)({},n);return r.isLoaded=!0,[].concat(Object(Z.a)(t.filter((function(t){return t.key!==e}))),[r]).sort((function(e,t){return t.key-e.key}))}))};function v(){return Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("div",{children:Object(O.jsx)("img",{className:"m-1 rounded-corners",height:"40",width:"40",src:f?f.picture:"missing",onError:function(e){e.target.onerror=null,e.target.src=S}})}),Object(O.jsx)("div",{className:"align-self-center",style:{fontWeight:700,fontSize:"20px"},children:f?f.name:"loading..."})]})}function m(){return b.length?1==b.length?Object(O.jsxs)(O.Fragment,{children:[!b[0].isLoaded&&Object(O.jsx)("img",{className:"img-fluid mx-auto d-block max-height-75",src:z}),Object(O.jsx)("img",{src:b[0].url,className:"img-fluid mx-auto d-block max-height-75",onLoad:function(){b[0].isLoaded||x(b[0].key)}})]}):Object(O.jsx)(V.a,{className:"bg-dark",children:b.map((function(e,t){return Object(O.jsxs)(V.a.Item,{children:[!b[0].isLoaded&&Object(O.jsx)("img",{className:"img-fluid mx-auto d-block max-height-75",src:z}),Object(O.jsx)("img",{src:e.url,className:"img-fluid mx-auto d-block max-height-75",onLoad:function(){b[0].isLoaded||x(e.key)}})]},t)}))}):null}return Object(O.jsxs)("div",{className:"border m-3 d-flex flex-column bg-light rounded-corners",children:[!t&&Object(O.jsx)(v,{}),Object(O.jsx)("div",{className:"d-flex m-1",children:Object(O.jsx)("div",{className:"flex-grow-1",style:{maxHeight:"50vh",overflow:"auto",overflowWrap:"anywhere",fontWeight:700,fontSize:"15px"},children:c.text})}),Object(O.jsx)(m,{}),Object(O.jsxs)("div",{className:"d-flex m-1",children:[Object(O.jsx)("div",{style:{fontWeight:700,fontSize:"10px"},children:Date(c.created)}),Object(O.jsx)("div",{className:"flex-grow-1"}),Object(O.jsx)("div",{children:Object(O.jsxs)(X.a,{children:[Object(O.jsx)(X.a.Toggle,{className:"btn-sm",children:"action"}),Object(O.jsxs)(X.a.Menu,{children:[Object(O.jsx)(X.a.Item,{children:"Make Private"}),n.businessLogic.isMine(t)&&Object(O.jsx)(X.a.Item,{onClick:function(){return n.businessLogic.deletePost(t)},children:"Delete"}),Object(O.jsx)(X.a.Item,{children:"Share"})]})]})})]})]})},J=function(e){var t,n=e.soul,a=Object(r.useContext)(l),s=Object(r.useState)([]),c=Object(i.a)(s,2),o=c[0],u=c[1];return Object(r.useEffect)((function(){return console.log("setting posts event handler"),a.businessLogic.subscribePosts(u,n,t),function(){console.log("dropping posts event handler")}}),[]),Object(O.jsx)("div",{className:"scrolling-wrapper",children:Object(O.jsx)("div",{className:"scrolling-content",children:o.map((function(e){return Object(O.jsx)(K,{soul:e._["#"]},e.key)}))})})},q=function(){var e=Object(u.h)().soul;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(W,{soul:e}),Object(O.jsx)(J,{soul:e})]})},_=function(e){e.baseUrl;var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],c=Object(r.useContext)(l),j=[];return Object(r.useEffect)((function(){return c.businessLogic.subscribeLogin(s,j),c.businessLogic.login(null,null,!0),window.bl=c.businessLogic,function(){j.forEach((function(e){return e.off()}))}}),[]),Object(O.jsx)(o.a,{children:Object(O.jsxs)(u.d,{children:[a&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.b,{path:"/",exact:!0,children:Object(O.jsx)(u.a,{to:"/following"})}),Object(O.jsx)(u.b,{path:"/following",component:F}),Object(O.jsx)(u.b,{path:"/feed/:soul",component:q}),Object(O.jsx)(u.b,{path:"/settings",component:D}),Object(O.jsx)(u.b,{path:"*",children:Object(O.jsx)(u.a,{to:"/following"})})]}),!a&&Object(O.jsx)(u.b,{path:"*",component:x})]})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,542)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},ee=(n(230),n(63)),te=n(64),ne=n(23),re=n(58),ae=n(112),se=n.n(ae),ce=n(113),ie=n.n(ce),oe=n(205),ue=Object(re.a)("gateway"),le=function(){function e(t){Object(ee.a)(this,e),this.canPut=!1,this.canGet=!0,this.connectionStatus={connect:!0,error:""},Object.defineProperty(this,ue,{writable:!0,value:void 0})}return Object(te.a)(e,[{key:"connect",value:function(){var e=Object(G.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.gateway||(t={gateway:"https://dweb.link/ipfs/"}),Object(ne.a)(this,ue)[ue]=t.gateway,e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFile",value:function(){var e=Object(G.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&this.canGet){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",Object(ne.a)(this,ue)[ue]+t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putFile",value:function(){var e=Object(G.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),je=n(497),be=Object(re.a)("options"),he=function(){function e(t){Object(ee.a)(this,e),this.canPut=!1,this.canGet=!1,Object.defineProperty(this,be,{writable:!0,value:void 0})}return Object(te.a)(e,[{key:"connect",value:function(){var e=Object(G.a)(B.a.mark((function e(t){var n=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.pinataApiKey&&t.pinataSecretApiKey){e.next=5;break}return this.canPut=!1,this.canGet=!1,this.connectionStatus={connect:!1,error:"missing pinata api key"},e.abrupt("return",this.connectionStatus);case 5:return t.gateway=t.gateway?t.gateway:"https://dweb.link/ipfs/",Object(ne.a)(this,be)[be]=t,"https://api.pinata.cloud/data/testAuthentication",e.next=10,je.get("https://api.pinata.cloud/data/testAuthentication",{headers:{pinata_api_key:Object(ne.a)(this,be)[be].pinataApiKey,pinata_secret_api_key:Object(ne.a)(this,be)[be].pinataSecretApiKey}}).then((function(e){console.log("pinata connect response",e),n.canPut=!0,n.canGet=!0,n.connectionStatus={connect:!0,error:e}})).catch((function(e){console.log("pinata connect error",e),n.canPut=!1,n.canGet=!0,n.connectionStatus={connect:!1,error:e}}));case 10:return e.abrupt("return",this.connectionStatus);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFile",value:function(){var e=Object(G.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&this.canGet){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",Object(ne.a)(this,be)[be].gateway+t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putFile",value:function(){var e=Object(G.a)(B.a.mark((function e(t){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&this.canPut){e.next=2;break}return e.abrupt("return");case 2:return console.log("file",t,Object(ne.a)(this,be)[be]),(n=new FormData).append("file",t),console.log("data",n),"https://api.pinata.cloud/pinning/pinFileToIPFS",e.next=9,je.post("https://api.pinata.cloud/pinning/pinFileToIPFS",n,{maxContentLength:"Infinity",headers:{"Content-Type":"multipart/form-data; boundary=".concat(n._boundary),pinata_api_key:Object(ne.a)(this,be)[be].pinataApiKey,pinata_secret_api_key:Object(ne.a)(this,be)[be].pinataSecretApiKey}}).then((function(e){return console.log("pinata response",e),e.data.IpfsHash})).catch((function(e){console.log("pinata error",e)}));case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),pe=Object(re.a)("eventUnSubs"),de=Object(re.a)("setLoggedIn"),fe=function(){function e(t){Object(ee.a)(this,e),this.isLoggedIn=!1,Object.defineProperty(this,pe,{writable:!0,value:[]}),Object.defineProperty(this,de,{writable:!0,value:void 0}),"undefined"===typeof se.a.SEA&&(console.log("setting SEA reference"),se.a.SEA=ie.a),this.gun=se()(t||"https://dev.rosolalaboratories.com:4000/gun"),this.gunUser=this.gun.user(),this.ipfsProvider=new le,this.ipfsProvider.connect(),this.checkForLocaLIpfsNode(),console.log("constructed")}return Object(te.a)(e,[{key:"dispose",value:function(){Object(ne.a)(this,pe)[pe].forEach((function(e){return e.off()}))}},{key:"getSetting",value:function(){var e=Object(G.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gunAppRoot.get("settings").get(t).then();case 2:return n=e.sent,e.next=5,ie.a.decrypt(n,this.userEncPair);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSetting",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.a.encrypt(n,this.userEncPair);case 2:return r=e.sent,e.next=5,this.gunAppRoot.get("settings").get(t).put(r).then();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"connectToPinata",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSetting("pinataApiKey");case 2:return t=e.sent,e.next=5,this.getSetting("pinataApiSecret");case 5:if(n=e.sent,t&&n){e.next=9;break}return console.log("no pinata keys found"),e.abrupt("return",!1);case 9:return r=new he,e.next=12,r.connect({pinataApiKey:t,pinataSecretApiKey:n});case 12:if(a=e.sent,console.log("ipfs pinata status",a),!a.connect){e.next=20;break}return console.log("connected to local ipfs node"),this.ipfsProvider=r,e.abrupt("return",!0);case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForLocaLIpfsNode",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new oe.a,e.next=3,t.connect();case 3:n=e.sent,console.log("ipfs local node status",n),n.connect&&(console.log("connected to local ipfs node"),this.ipfsProvider=t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createUser",value:function(e,t,n){var r=this;console.log("create user request"),this.gunUser.create(e,t,(function(e){r.gunAppRoot.get("profile").put({name:n,picture:"",following:"",posts:""})}))}},{key:"subscribeLogin",value:function(e,t){var n=this;Object(ne.a)(this,de)[de]=e,t=t||[],this.gun.on("auth",function(){var e=Object(G.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("login event",t),n.isLoggedIn=!0,n.gunAppRoot=n.gunUser.get("sovereign"),n.mySoul=n.gunUser._.soul,n.userEncPair=t.sea,n.ipfsProvider.canPut){e.next=8;break}return e.next=8,n.connectToPinata();case 8:Object(ne.a)(n,de)[de](!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"login",value:function(e,t,n){console.log("login request"),n?this.gunUser.recall({sessionStorage:!0}):this.gunUser.auth(e,t)}},{key:"logout",value:function(){console.log("logout request"),this.gunUser.leave(),this.isLoggedIn=!1,Object(ne.a)(this,de)[de](!1)}},{key:"getTimeElapsed",value:function(e){var t=(new Date).getTime()-e;return t<6e4?"just now":t<36e5?Math.round(t/6e4)+" mins":t<864e5?Math.round(t/36e5)+" hrs":t<6048e5?Math.round(t/864e5)+" days":t<2629743831.225?Math.round(t/6048e5)+" wks":t<31556925974.7?Math.round(t/2629743831.225)+" mos":"long ago"}},{key:"subscribeTimeElapsed",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n,r){var a,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=r||[],a=setInterval(n(this.getTimeElapsed(t)),12e4),(s={}).off=function(){clearInterval(a)},r.push(s);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"parseUserFromSoul",value:function(e){if(e){var t=e.match(/^~[^/]*/);if(0!=t.length)return t[0]}}},{key:"parseIDFromSoul",value:function(e){if(e){var t=e.match(/[^/]*$/);if(0!=t.length)return t[0]}}},{key:"isMine",value:function(e){return this.parseUserFromSoul(e)==this.gunUser._.soul}},{key:"getMaxTimeStampOfNode",value:function(e){if(!e||!e._||!e._[">"])return 0;var t=0;for(var n in e._[">"])e.hasOwnProperty(n)&&!isNaN(e[n])&&(t=Math.max(t,e[n]));return t}},{key:"manageArrayState",value:function(e,t,n,r){var a=e.findIndex((function(e){return e.key===n}));if(-1==a&&!t)return e;if(-1==a){var s=Object(k.a)({},t);return s.key=n,[].concat(Object(Z.a)(e),[s]).sort((function(e,t){return t[r]-e[r]}))}if(t){var c=e[a];if(this.getMaxTimeStampOfNode(t)>this.getMaxTimeStampOfNode(c)){var i=Object(k.a)({},t);return i.key=n,[].concat(Object(Z.a)(e.filter((function(e){return e.key!==n}))),[i]).sort((function(e,t){return t[r]-e[r]}))}return e}return console.log("deleting item"),e.filter((function(e){return e.key!==n}))}},{key:"followUser",value:function(){var e=Object(G.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.parseUserFromSoul(t),n=this.gun.get(t),this.gunAppRoot.get("following").get(t).put({trusted:!1,mute:!1,key:t}).get("user").put(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPost",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n){var r,a,s=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(new Date).getTime(),a=r+"_"+this.mySoul,this.gunAppRoot.get("posts").get(a).put({text:t.text,created:r,modified:r,key:a}).once(function(){var e=Object(G.a)(B.a.mark((function e(t){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s.gunAppRoot.get("posts").get(a),s.gunAppRoot.get("profile").get("lastPost").put(r),n&&n.length&&n.forEach(function(){var e=Object(G.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.ipfsProvider.putFile(t);case 2:n=e.sent,r.get("attachments").set(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deletePost",value:function(){var e=Object(G.a)(B.a.mark((function e(t){var n,r,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gunAppRoot.get("profile").get("lastPost").then();case 2:return n=e.sent,e.next=5,this.gun.get(t).get("key").then();case 5:r=e.sent,n&&n==r&&this.gunAppRoot.get("profile").get("lastPost").put(!1),a=this.parseIDFromSoul(t),this.gunAppRoot.get("posts").get(a).put(null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPicture",value:function(){var e=Object(G.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipfsProvider.getFile(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProfile",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.abrupt("return",this.gunUser.get("sovereign").get("profile").once(n));case 4:return t=this.parseUserFromSoul(t),e.abrupt("return",this.gun.get(t).get("sovereign").get("profile").once(n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.next=3,this.ipfsProvider.putFile(n);case 3:t.picture=e.sent;case 4:return e.abrupt("return",this.gunUser.get("sovereign").get("profile").put(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"subscribePosts",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n,r){var a=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=r||[],n?this.gun.get(n).get("sovereign").get("posts").map().on((function(e,n,s,c){r.includes(c)||r.push(c),t((function(t){return a.manageArrayState(t,e,n,"created")}))})):(this.gunAppRoot.get("following").map().get("user").get("sovereign").get("posts").map().on((function(e,n,s,c){r.includes(c)||r.push(c),t((function(t){return a.manageArrayState(t,e,n,"created")}))})),this.gunAppRoot.get("following").map().get("user").get("sovereign").get("posts").map().on((function(e,n,s,c){r.includes(c)||r.push(c),t((function(t){return a.manageArrayState(t,e,n,"created")}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"subscribeProfiles",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n){var r=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=n||[],this.gunAppRoot.get("following").map().on(function(){var e=Object(G.a)(B.a.mark((function e(a,s,c,i){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.includes(i)||n.push(i),!a){e.next=5;break}return e.next=4,r.gunAppRoot.get("following").get(s).get("user").get("sovereign").get("profile").get("lastPost").get("created").then();case 4:a.sort=e.sent;case 5:t((function(e){return r.manageArrayState(e,a,s,"sort")}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"subscribeProfile",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n,r,a,s,c){var i=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=c||[],n&&this.gun.get(t).get("sovereign").get("profile").on((function(e,t,r,a){c.includes(a)||c.push(a),n(Object(k.a)({},e))})),r&&this.gun.get(t).get("sovereign").get("profile").get("picture").on(function(){var e=Object(G.a)(B.a.mark((function e(t,n,a,s){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.includes(s)||c.push(s),e.t0=r,e.next=4,i.getPicture(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1),console.log("set profile pic event");case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()),!this.isMine(t)&&a&&this.gunAppRoot.get("following").get(t).on((function(e,t,n,r){c.includes(r)||c.push(r),a(Object(k.a)({},e))})),s&&this.gun.get(t).get("sovereign").get("profile").get("lastPost").on((function(e,t,n,r){c.includes(r)||c.push(r),s(Object(k.a)({},e))}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s,c){return e.apply(this,arguments)}}()},{key:"subscribePost",value:function(){var e=Object(G.a)(B.a.mark((function e(t,n,r,a,s){var c=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=s||[],this.gun.get(t).on((function(e,t,r,a){s.includes(a)||s.push(a),n(Object(k.a)({},e))})),this.gun.get(t).get("attachments").map().on(function(){var e=Object(G.a)(B.a.mark((function e(t,n,a,i){var o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.includes(i)||s.push(i),e.next=3,c.getPicture(t);case 3:e.t0=e.sent,o={mime:"image/*",url:e.t0},r((function(e){return c.manageArrayState(e,o,n,"key")}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()),this.gun.get(this.parseUserFromSoul(t)).get("sovereign").get("profile").on((function(e,t,n,r){s.includes(r)||s.push(r),a(Object(k.a)({},e))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s){return e.apply(this,arguments)}}()}]),e}(),ge=window.location.pathname,Oe=ge.indexOf("/sovereign"),xe=-1==Oe?"":ge.substring(0,Oe);console.log("base",xe),c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)("div",{className:"screen-wrapper",children:Object(O.jsx)(l.Provider,{value:{businessLogic:new fe},children:Object(O.jsx)(_,{baseUrl:xe})})})}),document.getElementById("root")),$()}},[[516,1,2]]]);
//# sourceMappingURL=main.fe1c78eb.chunk.js.map