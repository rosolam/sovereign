{"version":3,"sources":["../node_modules/gun sync","api/IpfsProviders/IpfsProviderLocalNode.js","api/ApiContext.js","pages/Login.js","components/FollowModal.js","components/NewPostModal.js","media/missing-profile-picture.png","components/UpdateProfileModal.js","components/AddressModal.js","components/FollowingHeader.js","components/Profile.js","components/Profiles.js","pages/Following.js","components/IpfsSettings.js","components/BackArrow.js","components/Header.js","pages/Settings.js","components/FeedHeader.js","media/loading-attachment.gif","components/Post.js","components/Posts.js","pages/Feed.js","App.js","reportWebVitals.js","api/IpfsProviders/IpfsProviderGateway.js","api/IpfsProviders/IpfsProviderPinata.js","api/BusinessLogic.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","ipfsClient","require","IpfsProviderLocalNode","options","canPut","canGet","a","server","this","connectionStatus","connect","error","hash","chunks","cat","chunk","push","Buffer","from","buf","concat","blob","Blob","objSrc","window","URL","createObjectURL","file","arrayBuffer","add","result","console","log","cid","string","ApiContext","React","createContext","Login","apiContext","useContext","history","useHistory","useState","username","setUsername","name","setName","password","setPassword","confirmPassword","setConfirmPassword","passwordStrength","zxcvbn","className","Tabs","defaultActiveKey","Tab","eventKey","title","Form","Group","controlId","Label","Control","type","placeholder","value","onChange","target","Button","variant","onClick","preventDefault","businessLogic","login","alert","Text","ProgressBar","animated","label","score","min","max","now","Check","createUser","FollowModal","show","onClose","soul","setSoul","Modal","onHide","Header","closeButton","Title","Body","Footer","followUser","NewPostModal","text","setText","files","setFiles","useDropzone","accept","onDrop","acceptedFiles","map","Object","assign","preview","getRootProps","getInputProps","thumbs","src","width","useEffect","forEach","revokeObjectURL","dropZone","style","flexWrap","as","rows","createPost","UpdateProfileModal","picture","setPicture","loadProfile","profile","getProfile","setupIpfs","height","onError","onerror","missingProfileImage","ipfsProvider","updateProfile","AddressModal","textAreaRef","ref","textarea","size","readOnly","select","document","execCommand","FollowingHeader","followModal","setFollowModal","myProfileModal","setMyProfileModal","postModal","setPostModal","addressModal","setAddressModal","mySoul","Navbar","collapseOnSelect","expand","bg","Brand","href","Toggle","aria-controls","Collapse","Nav","Link","to","logout","Profile","useParams","setProfile","profilePic","setProfilePic","unfollowed","trusted","mute","setFollowing","lastPost","setLastPost","timeElapsed","setTimeElapsed","eventUnSubs","subscribeProfile","u","off","timeElapsedUnSub","subscribeTimeElapsed","created","fontWeight","fontSize","marginLeft","Profiles","profiles","setProfiles","subscribeProfiles","key","Following","IpfsSettings","pinataKey","setPinataKey","pinataSecret","setPinataSecret","pinataStatus","setPinataStatus","handleSubmit","setSetting","connectToPinata","connectResult","disabled","Spinner","animation","role","aria-hidden","BackArrow","path","back","navs","sticky","Settings","FeedHeader","isMe","isMine","whiteSpace","overflowWrap","Post","postRoot","setPostRoot","attachments","setAttachments","subscribePost","hideLoadingAnimation","prevState","existingItem","find","p","updatedItem","isLoaded","filter","sort","b","ProfileHeader","ImageSpot","length","loadingImageAnimation","url","onLoad","Carousel","index","Item","overflow","Date","Dropdown","Menu","deletePost","Posts","posts","setPosts","subscribePosts","post","ProfileFeed","App","baseUrl","isLoggedIn","setLoggedIn","subscribeLogin","bl","exact","component","Feed","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","IpfsProviderGateway","gateway","axios","IpfsProviderPinata","pinataApiKey","pinataSecretApiKey","get","headers","pinata_api_key","pinata_secret_api_key","response","catch","formData","FormData","append","maxContentLength","_boundary","data","IpfsHash","BusinessLogic","gunPeer","Gun","SEA","gun","gunUser","user","checkForLocaLIpfsNode","gunAppRoot","encValue","decrypt","userEncPair","encrypt","put","getSetting","pinataApiSecret","ipfs","create","ack","following","unSubs","on","sea","recall","sessionStorage","auth","leave","time","diff","getTime","Math","round","setElapsed","intervalId","setInterval","getTimeElapsed","unSub","clearInterval","match","parseUserFromSoul","maxTimeStamp","prop","hasOwnProperty","isNaN","sortBy","existingIndex","findIndex","newItem","getMaxTimeStampOfNode","userRef","pictures","modified","once","postRef","pic","putFile","picHash","set","lastPostKey","deletedPostKey","parseIDFromSoul","getFile","cb","_msg","_ev","includes","manageArrayState","getPicture","setPost","attachment","mime","location","pathname","root","indexOf","base","substring","ReactDOM","render","StrictMode","Provider","getElementById"],"mappings":"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","file":"static/js/main.fe1c78eb.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 137;","const ipfsClient = require('ipfs-http-client')\r\n\r\nclass IpfsProviderLocalNode {\r\n\r\n    canPut = false;\r\n    canGet = false;\r\n    connectionStatus;\r\n    #ipfs\r\n    \r\n    constructor(options) {\r\n    }\r\n\r\n    async connect(options) {\r\n\r\n        if (!options || !options.server) {\r\n            options = { server: '/ip4/127.0.0.1/tcp/5001' }\r\n        }\r\n\r\n        this.#ipfs = ipfsClient(options.server)\r\n\r\n        try {\r\n\r\n            //touch the server\r\n            const id = await this.#ipfs.id()\r\n            \r\n            this.canPut = true;\r\n            this.canGet = true;\r\n            this.connectionStatus = { connect: true, error: '' }\r\n            return this.connectionStatus\r\n\r\n        } catch (err) {\r\n\r\n            this.canPut = false;\r\n            this.canGet = false;\r\n            this.connectionStatus = { connect: false, error: err };\r\n            return this.connectionStatus\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async getFile(hash) {\r\n\r\n        if (!hash || !this.canGet) {\r\n            return\r\n        }\r\n\r\n        try{\r\n            const chunks = []\r\n            for await (const chunk of this.#ipfs.cat(hash)) {\r\n                chunks.push(Buffer.from(chunk))  //found that casting each chunk to a buffer is necessary when connecting to IPFS via API\r\n            }\r\n    \r\n            const buf = Buffer.concat(chunks)\r\n            const blob = new Blob([buf])\r\n            const objSrc = window.URL.createObjectURL(blob)\r\n            return objSrc\r\n  \r\n        }catch (err){\r\n            return null\r\n        }\r\n\r\n    }\r\n\r\n    async putFile(file) {\r\n\r\n        if(!file || !this.canPut){\r\n            return\r\n        }\r\n\r\n        const buf = await file.arrayBuffer() \r\n\r\n        //https://github.com/ipfs/js-ipfs/blob/master/docs/core-api/FILES.md#ipfsadddata-options\r\n        const result = await this.#ipfs.add(buf)\r\n        console.log('ipfs local node put', result)\r\n        return result.cid.string\r\n\r\n    }\r\n\r\n}\r\nexport default IpfsProviderLocalNode","import React from 'react'\r\n\r\nconst ApiContext = React.createContext()\r\n\r\nexport default ApiContext","import {Button, Form, Tabs, Tab, ProgressBar} from 'react-bootstrap'\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport { useState, useEffect, useContext} from 'react'\r\nimport ApiContext from '../api/ApiContext'\r\nimport zxcvbn from 'zxcvbn'\r\n\r\n\r\nconst Login = () => {\r\n    \r\n    const apiContext = useContext(ApiContext)\r\n    const history = useHistory();\r\n    const [username, setUsername] = useState('')\r\n    const [name, setName] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n     \r\n    const passwordStrength = zxcvbn(password)\r\n\r\n    const handleLogin = (e) => {\r\n        \r\n        e.preventDefault()\r\n        \r\n        //TODO validation\r\n        if(!username || !password){\r\n            alert('oops!')\r\n            return\r\n        }\r\n        \r\n        //login\r\n        apiContext.businessLogic.login(username,password,false)\r\n\r\n        //redirect to home\r\n        history.push('/')\r\n    \r\n    } \r\n\r\n    const handleCreate = (e) => {\r\n        \r\n        e.preventDefault()\r\n        \r\n        //TODO validation\r\n        if(!username || !password){\r\n            alert('oops!')\r\n            return\r\n        }\r\n        \r\n        //create\r\n        console.log(apiContext)\r\n        apiContext.businessLogic.createUser(username,password,name)\r\n\r\n        //redirect to home\r\n        history.push('/')\r\n    \r\n    } \r\n\r\n    return (\r\n        <div className='m-3'>\r\n\r\n            <Tabs defaultActiveKey=\"login\">\r\n\r\n                <Tab eventKey=\"login\" title=\"Log In\" className=\"border border-top-0 p-3\">\r\n                    <Form.Group controlId=\"formLoginUsername\">\r\n                        <Form.Label>Username</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"username here\" value={username} onChange={(e) => setUsername(e.target.value)} />\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"formLoginPassword\">\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control type=\"password\" placeholder=\"password here\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n                    </Form.Group>\r\n                    <Button variant=\"primary\" type=\"submit\" className='m-1 d-block w-100' onClick={handleLogin}>Login</Button>\r\n                </Tab>\r\n\r\n                <Tab eventKey=\"createAccount\" title=\"Create Account\" className=\"border border-top-0 p-3\">\r\n                    <Form.Group controlId=\"formCreateName\">\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Jane Smith\" value={name} onChange={(e) => setName(e.target.value)} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            This is how other users will see you online; You can change this later.\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"formCreateUsername\">\r\n                        <Form.Label>Username</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"smithj42\" value={username} onChange={(e) => setUsername(e.target.value)} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            This is is your user name to login, this cannot be changed.\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"formCreatePassword\">\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control type=\"password\" placeholder=\"strong password here\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n                        <Form.Text>\r\n                            <ProgressBar animated label={passwordStrength.score == 4 ? 'strong' : 'weak'} min={password ? -1 : 0} max=\"4\" variant={passwordStrength.score == 4 ? 'success' : 'danger'} now={passwordStrength.score} />\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"formCreateConfirmPassword\">\r\n                        <Form.Label>Confirm Password</Form.Label>\r\n                        <Form.Control type=\"password\" placeholder=\"strong password here again\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} />\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"formCreateCheckbox1\">\r\n                        <Form.Check type=\"checkbox\" label=\"I understand that there is no way to recover a lost password\" />\r\n                     </Form.Group>\r\n                     <Form.Group controlId=\"formCreateCheckbox2\">\r\n                        <Form.Check type=\"checkbox\" label=\"I understand that words have power and that freedom comes with the price of accountability and tolerance\" />\r\n                     </Form.Group>\r\n                    <Button variant=\"primary\" type=\"submit\" className='m-1 d-block w-100' onClick={handleCreate}>Create Account</Button>\r\n                </Tab>\r\n\r\n                <Tab eventKey=\"about\" title=\"About\" className=\"border border-top-0 p-3\">\r\n\r\n                    What the heck is this all about?!\r\n\r\n                </Tab>\r\n\r\n            </Tabs>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import {useState, useContext} from 'react'\r\nimport {Modal,Form,Button} from 'react-bootstrap'\r\nimport ApiContext from '../api/ApiContext'\r\n\r\nconst FollowModal = ({show, onClose}) => {\r\n    \r\n    const apiContext = useContext(ApiContext)\r\n\r\n    const [soul, setSoul] = useState('')\r\n  \r\n    const handleSubmit = (e) => {\r\n        \r\n        e.preventDefault()\r\n        \r\n        //TODO validation\r\n        if(!soul){\r\n            alert('Please provide a user id')\r\n            return\r\n        }\r\n\r\n        //follow user\r\n        apiContext.businessLogic.followUser(soul)\r\n\r\n        //close\r\n        onClose()\r\n\r\n    } \r\n  \r\n    return (\r\n        <>\r\n            <Modal show={show} onHide={onClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Follow User</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group controlId=\"formUserAddress\">\r\n                        <Form.Label>User Address</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"user's address...\" value={soul} onChange={(e) => setSoul(e.target.value)} />\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={onClose}>Close</Button>\r\n                    <Button variant=\"primary\" type=\"submit\" onClick={handleSubmit}>Follow!</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n      </>\r\n    );\r\n}\r\n\r\nexport default FollowModal","import {useState, useContext, useEffect} from 'react'\r\nimport {Modal,Form,Button} from 'react-bootstrap'\r\nimport ApiContext from '../api/ApiContext'\r\nimport { useDropzone } from 'react-dropzone';\r\n\r\nconst NewPostModal = ({show, onClose}) => {\r\n\r\n    const apiContext = useContext(ApiContext)\r\n\r\n    const [text, setText] = useState('')\r\n    const [files, setFiles] = useState([]);\r\n    const {acceptedFiles, getRootProps, getInputProps} = useDropzone({\r\n      accept: 'image/*',\r\n      onDrop: acceptedFiles => {\r\n        setFiles(acceptedFiles.map(file => Object.assign(file, {\r\n          preview: URL.createObjectURL(file)\r\n        })));\r\n      }\r\n    });\r\n\r\n    const thumbs = files.map(file => (\r\n        <div key={file.name}>\r\n            <img src={file.preview} width='50px'/>\r\n        </div>\r\n      ));\r\n    \r\n    useEffect(() => () => {\r\n    // Make sure to revoke the data uris to avoid memory leaks\r\n    files.forEach(file => URL.revokeObjectURL(file.preview));\r\n    }, [files]);\r\n\r\n    const handleSubmit = (e) => {\r\n        \r\n        e.preventDefault()\r\n        \r\n        //TODO validation\r\n        if(!text){\r\n            alert('Please add text for your post')\r\n            return\r\n        }\r\n\r\n        //create post\r\n        apiContext.businessLogic.createPost({\r\n            text: text\r\n        }, files)\r\n\r\n        //reset the form via the state\r\n        //setText('')\r\n\r\n        //close the form\r\n        onClose()\r\n\r\n    } \r\n  \r\n    const dropZone = \r\n        <div {...getRootProps()} className='dropzone'>\r\n            <input {...getInputProps()} />\r\n            <p>Drag 'n' drop some files here, or click to select files</p>\r\n            <div className='d-flex' style={{flexWrap:'wrap'}}>{thumbs}</div>\r\n        </div>\r\n\r\n    return (\r\n        <>\r\n            <Modal show={show} onHide={onClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>New Post</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group controlId=\"formBasicEmail\">\r\n                        <Form.Label>Post</Form.Label>\r\n                        <Form.Control as='textarea' rows='5' placeholder=\"your post...\" value={text} onChange={(e) => setText(e.target.value)} />\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"formPictures\">\r\n                        <Form.Label>Pictures</Form.Label>\r\n                        {dropZone}                        \r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={onClose}>Close</Button>\r\n                    <Button variant=\"primary\" type=\"submit\" onClick={handleSubmit}>Post!</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n      </>\r\n    );\r\n}\r\n\r\nexport default NewPostModal","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAwRjA1MTczMTFGNDExRUFCRkEyOTY3MDRBRTIzQjQ2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAwRjA1MTc0MTFGNDExRUFCRkEyOTY3MDRBRTIzQjQ2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDBGMDUxNzExMUY0MTFFQUJGQTI5NjcwNEFFMjNCNDYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDBGMDUxNzIxMUY0MTFFQUJGQTI5NjcwNEFFMjNCNDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4bw32zAAALEElEQVR42uzd61Ib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\"","import { useState, useEffect, useContext } from 'react'\r\nimport { Modal, Form, Button } from 'react-bootstrap'\r\nimport ApiContext from '../api/ApiContext'\r\nimport { useDropzone } from 'react-dropzone';\r\nimport missingProfileImage from '../media/missing-profile-picture.png'\r\n\r\nconst UpdateProfileModal = ({ show, onClose }) => {\r\n\r\n    const apiContext = useContext(ApiContext)\r\n\r\n    const [name, setName] = useState('')\r\n    const [picture, setPicture] = useState('')\r\n    const [file, setFile] = useState();\r\n\r\n    const { acceptedFiles, getRootProps, getInputProps } = useDropzone({\r\n        accept: 'image/*',\r\n        onDrop: acceptedFiles => {\r\n\r\n            //only accept first file\r\n            const file = acceptedFiles[0]\r\n            setPicture(URL.createObjectURL(file))\r\n\r\n        }\r\n    });\r\n\r\n\r\n\r\n    useEffect(() => () => {\r\n        // Make sure to revoke the data uris to avoid memory leaks\r\n        URL.revokeObjectURL(picture);\r\n    }, [picture]);\r\n\r\n    const handleSubmit = (e) => {\r\n\r\n        e.preventDefault()\r\n\r\n        //TODO validation\r\n        if (!name) {\r\n            alert('Please provide a name')\r\n            return\r\n        }\r\n\r\n        //update profile\r\n        apiContext.businessLogic.updateProfile({\r\n            name: name\r\n        }, acceptedFiles[0])\r\n\r\n        //close\r\n        onClose()\r\n\r\n    }\r\n\r\n    const loadProfile = (profile) => {\r\n        setName(profile ? profile.name : '')\r\n        setPicture(profile ? profile.name : '')\r\n    }\r\n\r\n    useEffect(() => {\r\n        apiContext.businessLogic.getProfile(null, loadProfile)\r\n    }, [])\r\n\r\n    const dropZone = \r\n        <div {...getRootProps()} className='ml-3 dropzone'>\r\n            <input {...getInputProps()} />\r\n            <p>Drag 'n' drop some files here, or click to select files</p>\r\n        </div>\r\n\r\n    const setupIpfs = \r\n        <div className='mx-4'>Note: You are unable to upload a profile picture at this time.  Please setup an IPFS service in Settings to enable distributed file sharing.</div>\r\n\r\n    return (\r\n        <>\r\n            <Modal show={show} onHide={onClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Update Profile</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group controlId=\"formName\">\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"your name...\" value={name} onChange={(e) => setName(e.target.value)} />\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"formPicture\">\r\n                        <Form.Label>Picture</Form.Label>\r\n                        <div className='d-flex'>\r\n                                <img src={picture} style={{ width: '75px', height: '75px' }} onError={(e)=>{e.target.onerror = null; e.target.src=missingProfileImage}}  />\r\n\r\n                                {apiContext.businessLogic.ipfsProvider.canPut && dropZone}\r\n                                {!apiContext.businessLogic.ipfsProvider.canPut && setupIpfs}\r\n                                \r\n\r\n                        </div>\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    {!apiContext.businessLogic.ipfsProvider.canPut &&  <Button variant=\"warning\" onClick={onClose}>Setup IPFS Now</Button>}\r\n                    <Button variant=\"secondary\" onClick={onClose}>Close</Button>\r\n                    <Button variant=\"primary\" type=\"submit\" onClick={handleSubmit}>Update</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default UpdateProfileModal","import {useContext} from 'react'\r\nimport {Modal,Form,Button} from 'react-bootstrap'\r\nimport ApiContext from '../api/ApiContext'\r\n\r\nconst AddressModal = ({show, onClose, soul}) => {\r\n    \r\n    const apiContext = useContext(ApiContext)\r\n    let textAreaRef\r\n\r\n    const handleSubmit = (e) => {\r\n        \r\n        e.preventDefault()\r\n        \r\n        //copy to clipboard\r\n        textAreaRef.select()\r\n        document.execCommand(\"copy\")\r\n\r\n        //close\r\n        onClose()\r\n\r\n    } \r\n  \r\n    return (\r\n        <>\r\n            <Modal show={show} onHide={onClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Sovereign Address</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group controlId=\"formUserAddress\">\r\n                        <Form.Label>Address</Form.Label>\r\n                        <Form.Control ref={(textarea) => textAreaRef = textarea} as=\"textarea\" rows=\"3\" size='md' value={soul} readOnly/>\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={onClose}>Close</Button>\r\n                    <Button variant=\"primary\" type=\"submit\" onClick={handleSubmit}>Copy To Clipboard</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n      </>\r\n    );\r\n}\r\n\r\nexport default AddressModal","import {useState, useContext} from 'react'\r\nimport {Navbar, Nav, NavDropdown} from 'react-bootstrap'\r\nimport FollowModal from './FollowModal'\r\nimport NewPostModal from './NewPostModal'\r\nimport UpdateProfileModal from './UpdateProfileModal'\r\nimport ApiContext from '../api/ApiContext'\r\nimport {useHistory} from 'react-router-dom';\r\nimport AddressModal from './AddressModal'\r\nimport { Link} from \"react-router-dom\";\r\n\r\nconst FollowingHeader = () => {\r\n  \r\n  const apiContext = useContext(ApiContext)\r\n  \r\n  const [followModal, setFollowModal] = useState(false)\r\n  const [myProfileModal, setMyProfileModal] = useState(false)\r\n  const [postModal, setPostModal] = useState(false)\r\n  const [addressModal, setAddressModal] = useState(false)\r\n  const history = useHistory();\r\n\r\n  function handleLogout(){\r\n    apiContext.businessLogic.logout()\r\n    history.push('/login');\r\n  }\r\n\r\n  return (\r\n    <>\r\n      \r\n      <FollowModal show={followModal} onClose={() => {setFollowModal(false)}}/>\r\n      <UpdateProfileModal show={myProfileModal} onClose={() => {setMyProfileModal(false)}}/>\r\n      <NewPostModal show={postModal} onClose={() => {setPostModal(false)}}/>\r\n      <AddressModal show={addressModal} onClose={() => { setAddressModal(false) }} soul={apiContext.businessLogic.mySoul} />\r\n\r\n      <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n        <Navbar.Brand href=\"#home\"><div className='d-flex flex-column justify-content-center' style={{height:'50px'}}>Sovereign</div></Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n          <Nav className=\"ml-auto\">\r\n            <Nav.Link href=\"#\" onClick={() => {setPostModal(true)}}>New Post</Nav.Link>\r\n            <Nav.Link href=\"#\" onClick={() => {setFollowModal(true)}}>Follow Someone</Nav.Link>\r\n            <Nav.Link href=\"#\" onClick={() => { setAddressModal(true) }}>Share My Address</Nav.Link>\r\n            <Nav.Link href=\"#\" onClick={() => {setMyProfileModal(true)}}> Update My Profile</Nav.Link>\r\n            <Nav.Link as={Link} to=\"/settings\">Settings</Nav.Link>\r\n            <Nav.Link href=\"#\" onClick={handleLogout}>Logout</Nav.Link>\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n    </>\r\n    )\r\n}\r\n\r\nexport default FollowingHeader\r\n\r\n","import missingProfileImage from '../media/missing-profile-picture.png'\r\nimport {Dropdown} from 'react-bootstrap'\r\nimport {useHistory, useParams} from 'react-router-dom';\r\nimport { useState, useEffect, useContext} from 'react'\r\nimport ApiContext from '../api/ApiContext'\r\n\r\n\r\nconst Profile = ({soul}) => {\r\n   \r\n    const apiContext = useContext(ApiContext)\r\n    let { id } = useParams();\r\n    const [profile, setProfile] = useState({name:'loading...', picture:''})\r\n    const [profilePic, setProfilePic] = useState()\r\n    const [following, setFollowing] = useState({unfollowed: true, trusted: false, mute: false})\r\n    const [lastPost, setLastPost] = useState()\r\n    const [timeElapsed, setTimeElapsed] = useState('')\r\n    const history = useHistory();\r\n\r\n    let eventUnSubs = []\r\n\r\n    useEffect(() => {\r\n\r\n        console.log('setting profile event handler')\r\n        apiContext.businessLogic.subscribeProfile(\r\n            soul,\r\n            setProfile,\r\n            setProfilePic,\r\n            setFollowing,\r\n            setLastPost,\r\n            eventUnSubs\r\n        )\r\n\r\n        return () => {\r\n\r\n            console.log('dropping profile event handler')\r\n            if(eventUnSubs){\r\n                eventUnSubs.forEach(u => u.off())\r\n            }\r\n        \r\n        };\r\n\r\n    }, [])\r\n\r\n    useEffect(() => () => {\r\n        // Make sure to revoke the data uris to avoid memory leaks\r\n        URL.revokeObjectURL(profilePic);\r\n    }, [profilePic]);\r\n\r\n    let timeElapsedUnSub = []\r\n\r\n    useEffect(() => {\r\n        \r\n        if(!lastPost){return}\r\n\r\n        console.log('setting last post elapsed time event handler')\r\n        apiContext.businessLogic.subscribeTimeElapsed(lastPost.created, setTimeElapsed, timeElapsedUnSub)\r\n\r\n        return () => {\r\n            console.log('dropping last post elapsed time event handler')\r\n            if(timeElapsedUnSub){\r\n                timeElapsedUnSub.forEach(u => u.off())\r\n            }\r\n        }\r\n\r\n    }, [lastPost])\r\n\r\n    const onProfileClick = (e) => { \r\n        e.preventDefault()\r\n        history.push('/Feed/' + soul);\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile d-flex\" onClick={onProfileClick}>\r\n            <img className=\"m-1 circle-image\" height=\"50\" width=\"50\" src={profilePic ? profilePic : 'missing'} onError={(e)=>{e.target.onerror = null; e.target.src=missingProfileImage}} />\r\n            <div className=\"d-flex flex-column flex-grow-1\">\r\n                <div className=\"d-flex flex-fill\">\r\n                    <div style={{fontWeight:700, fontSize:'20px'}}>{profile.name}</div>\r\n                    <div style={{marginLeft:'auto'}}><div className='mr-2'></div></div>\r\n                </div>\r\n                <div className=\"d-flex flex-fill\">\r\n                    <div className='ellipsis' style={{width:225, fontWeight:700, fontSize:'12px'}}>{lastPost ? lastPost.text : ''}</div>\r\n                    <div className='d-flex' style={{marginLeft:'auto'}}><div className='mr-2' style={{fontWeight:700, fontSize:'12px'}}>{timeElapsed}</div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n\r\nexport default Profile","import React, { useState, useEffect, useContext } from 'react'\r\nimport ApiContext from \"../api/ApiContext\"\r\nimport Profile from './Profile'\r\n\r\n\r\nconst Profiles = () => {\r\n\r\n    const apiContext = useContext(ApiContext)\r\n    const [profiles, setProfiles] = useState([])\r\n    let eventUnSubs\r\n\r\n    useEffect(() => {\r\n\r\n        console.log('setting profiles event handler')\r\n        apiContext.businessLogic.subscribeProfiles(setProfiles, eventUnSubs)\r\n  \r\n        return () => {\r\n\r\n            console.log('dropping profiles event handler')\r\n            if(eventUnSubs){\r\n                eventUnSubs.forEach(u => u.off())\r\n            }\r\n           \r\n        };\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"scrolling-wrapper\">\r\n            <div className=\"scrolling-content\">\r\n                {profiles.map((profile) => (\r\n                    <Profile soul={profile.key} key={profile.key} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Profiles","import {useContext} from 'react'\r\nimport FollowingHeader from '../components/FollowingHeader'\r\nimport Profiles from '../components/Profiles'\r\nimport Profile from '../components/Profile'\r\nimport ApiContext from '../api/ApiContext'\r\n\r\nconst Following = () => {\r\n    \r\n    const apiContext = useContext(ApiContext)\r\n\r\n    return (\r\n        <>\r\n        <FollowingHeader/>\r\n        <Profile soul={apiContext.businessLogic.mySoul}/>\r\n        <Profiles/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Following\r\n","import React from 'react'\r\nimport { Button, Form, Tabs, Tab, Spinner } from 'react-bootstrap'\r\nimport { useState, useEffect, useContext} from 'react'\r\nimport ApiContext from '../api/ApiContext'\r\n\r\nconst IpfsSettings = () => {\r\n\r\n    const apiContext = useContext(ApiContext)\r\n    const [pinataKey, setPinataKey] = useState()\r\n    const [pinataSecret, setPinataSecret] = useState()\r\n    const [pinataStatus, setPinataStatus] = useState('')\r\n\r\n    const handleSubmit = async (e) => {\r\n        \r\n        e.preventDefault()\r\n        \r\n        setPinataStatus('test')\r\n\r\n        await apiContext.businessLogic.setSetting('pinataApiKey',pinataKey)\r\n        await apiContext.businessLogic.setSetting('pinataApiSecret',pinataSecret)\r\n        const connectResult = await apiContext.businessLogic.connectToPinata()\r\n\r\n        if(connectResult){\r\n            setPinataStatus('ok')\r\n        }else{\r\n            setPinataStatus('bad')\r\n        }\r\n\r\n    } \r\n    \r\n    return (\r\n        <div>\r\n            <div className='m-3'>\r\n\r\n                <Tabs defaultActiveKey=\"about\">\r\n\r\n                    <Tab eventKey=\"about\" title=\"About\" className=\"border border-top-0 p-3 scrolling-wrapper\" style={{ height: '75vh' }}  >\r\n                        <div className='scrolling-content m-1' >\r\n                            <p>TLDR; To upload files, install IPFS on the computer you are browsing from or enter your Pinata API Keys on the next tab.</p>\r\n                            <hr></hr>\r\n                            <p>Since this is a distributed application a special method is needed to share files in a secure, distributed and uncesorable manner.  Let me introduce you to the <a href='https://ipfs.io/' target='_new'>Interplanetary File System (IPFS)</a>!</p>\r\n                            <p>You can use your <b>own</b> IPFS node by <a href='https://github.com/ipfs-shipyard/ipfs-desktop' target='_new'>installing IPFS</a> on the desktop you are using to view this site right now; it will automatically be found and used by Sovereign!</p>\r\n                            <p>Without your own node, or on a mobile device that isn't conducive to hosting a node, we need someone to add your files into IPFS for you.  Fortunately there are some options, like <a href='https://pinata.cloud/' target='_new'>Pinata</a> that do just this!</p>\r\n                            <p>Sign up for a free account with them (1gb of storage for free), create an Admin API Key and enter the key codes on the next tab to enable file uploads!</p>\r\n                        </div>\r\n                    </Tab>\r\n                    <Tab eventKey=\"pinata\" title=\"Pinata\" className=\"border border-top-0 p-3\">\r\n                        <Form.Group controlId=\"formPinataKey\">\r\n                            <Form.Label>API Key</Form.Label>\r\n                            <Form.Control type=\"text\" placeholder=\"0skl3332nkl43n4nx21d\" value={pinataKey} onChange={(e) => setPinataKey(e.target.value)}/>\r\n                        </Form.Group>\r\n                        <Form.Group controlId=\"formPinataSecret\">\r\n                            <Form.Label>API Secret</Form.Label>\r\n                            <Form.Control as=\"textarea\" rows=\"3\" placeholder=\"n4p4fop3u1dpom5pomfi3h43opgfpn23mp3fmniop34nigfm23mdomp32fmopfm2\" value={pinataSecret} onChange={(e) => setPinataSecret(e.target.value)}/>\r\n                        </Form.Group>\r\n                        \r\n                        {pinataStatus == 'ok' && <>\r\n                            <div className='d-flex justify-content-center'><p>Test Successful! Enjoy uploading files :)</p></div>\r\n                            <Button variant=\"primary\" type=\"submit\" className='m-1 d-block w-100' >Close</Button>\r\n                        </>}\r\n                        {pinataStatus == 'bad' && <div className='d-flex justify-content-center'><p>Test Failed, double check your API values and ensure the key is an <b>Admin</b> Key</p></div>}\r\n\r\n                        {pinataStatus == 'test' && \r\n                            <Button variant=\"primary\" disabled type=\"submit\" className='m-1 d-block w-100'>  \r\n                                <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\" className='mr-3'/>\r\n                                Testing...\r\n                            </Button>\r\n                        }\r\n                        {(!pinataStatus || pinataStatus == 'bad') &&\r\n                            <Button variant=\"primary\" type=\"submit\" className='m-1 d-block w-100' onClick={handleSubmit}>Test</Button>\r\n                        }\r\n                    </Tab>\r\n\r\n                </Tabs>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default IpfsSettings\r\n","import ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nconst BackArrow = ({path}) => {\r\n\r\n    const history = useHistory();\r\n\r\n    \r\n    const onBackArrowClick = (e) => { \r\n        e.preventDefault()\r\n        history.push(path);\r\n    }\r\n    \r\n    return (\r\n        <ArrowBackIcon style={{fontSize:'30px', height:'50px'}} onClick={onBackArrowClick}/>\r\n    )\r\n}\r\n\r\nexport default BackArrow\r\n","import {Navbar, Nav} from 'react-bootstrap'\r\nimport BackArrow from './BackArrow'\r\n\r\nconst Header = ({back,label, navs}) => {\r\n    return (\r\n        <Navbar sticky=\"top\" collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n        <Navbar.Brand href=\"#\" className='d-flex m-0 mr-1 align-items-center' >\r\n            {back && <BackArrow path={back} />}\r\n            <div className=\"ml-2\">{label}</div>\r\n        </Navbar.Brand>\r\n        {navs && \r\n            <>\r\n                <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n                <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                    <Nav className=\"ml-auto\">\r\n                        {navs}\r\n                    </Nav>\r\n                </Navbar.Collapse>\r\n            </>\r\n        }\r\n    </Navbar>\r\n    )\r\n}\r\nexport default Header\r\n","import { Link } from \"react-router-dom\"\r\nimport IpfsSettings from \"../components/IpfsSettings\"\r\nimport Header from \"../components/Header\"\r\n\r\nconst Settings = () => {\r\n    \r\n    const headerBack = '/following/'\r\n    const headerLabel = 'Settings'\r\n    const headerNavs = null\r\n    \r\n    return (\r\n        <>\r\n            <Header back={headerBack} label={headerLabel} navs={headerNavs}/>            \r\n            <IpfsSettings/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Settings\r\n","import { Navbar, Nav, NavDropdown } from 'react-bootstrap'\r\nimport { Link } from \"react-router-dom\"\r\nimport missingProfileImage from '../media/missing-profile-picture.png'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useState, useEffect, useContext } from 'react'\r\nimport ApiContext from '../api/ApiContext'\r\nimport BackArrow from './BackArrow';\r\nimport NewPostModal from './NewPostModal'\r\nimport UpdateProfileModal from './UpdateProfileModal'\r\nimport FollowModal from './FollowModal'\r\nimport AddressModal from './AddressModal'\r\n\r\nconst FeedHeader = ({ soul }) => {\r\n\r\n    const apiContext = useContext(ApiContext)\r\n    const [profile, setProfile] = useState({ name: 'loading...', picture: '' })\r\n    const [profilePic, setProfilePic] = useState()\r\n    const [following, setFollowing] = useState({ unfollowed: true, trusted: false, mute: false })\r\n    const [followModal, setFollowModal] = useState(false)\r\n    const [myProfileModal, setMyProfileModal] = useState(false)\r\n    const [postModal, setPostModal] = useState(false)\r\n    const [addressModal, setAddressModal] = useState(false)\r\n    const history = useHistory();\r\n\r\n    let eventUnSubs = []\r\n    const isMe = apiContext.businessLogic.isMine(soul)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        console.log('setting profile event handler', soul)\r\n        apiContext.businessLogic.subscribeProfile(\r\n            soul,\r\n            setProfile,\r\n            setProfilePic,\r\n            setFollowing,\r\n            null,\r\n            eventUnSubs\r\n        )\r\n\r\n        return () => {\r\n\r\n            console.log('dropping profile event handler')\r\n            if (eventUnSubs) {\r\n                eventUnSubs.forEach(u => u.off())\r\n            }\r\n\r\n        };\r\n\r\n    }, [])\r\n\r\n    useEffect(() => () => {\r\n        // Make sure to revoke the data uris to avoid memory leaks\r\n        URL.revokeObjectURL(profilePic);\r\n    }, [profilePic]);\r\n    \r\n    const onProfileClick = (e) => {\r\n        e.preventDefault()\r\n        alert('expand profile?')\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <FollowModal show={followModal} onClose={() => { setFollowModal(false) }} />\r\n            <UpdateProfileModal show={myProfileModal} onClose={() => { setMyProfileModal(false) }} />\r\n            <NewPostModal show={postModal} onClose={() => { setPostModal(false) }} />\r\n            <AddressModal show={addressModal} onClose={() => { setAddressModal(false) }} soul={soul} />\r\n\r\n            <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n                <Navbar.Brand href=\"#\" className='d-flex m-0 mr-1' >\r\n                    <BackArrow path='/Following' />\r\n                    <div className=\"d-flex\" onClick={onProfileClick}>\r\n                        <img className=\"m-1 circle-image\" height=\"50\" width=\"50\" src={profilePic ? profilePic : 'missing'} onError={(e) => { e.target.onerror = null; e.target.src = missingProfileImage }} />\r\n                        <div className='m-1 d-flex flex-wrap align-content-center' style={{ fontWeight: 700, width:'130px', fontSize: '15px', whiteSpace:'normal', overflowWrap:'anywhere'}}>{profile.name}</div>\r\n                    </div>  \r\n                </Navbar.Brand>\r\n                <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n                <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                    <Nav className=\"ml-auto\">\r\n                        {isMe && <Nav.Link href=\"#\" onClick={() => { setPostModal(true) }}>New Post</Nav.Link>}\r\n                        {isMe && <Nav.Link href=\"#\" onClick={() => { setMyProfileModal(true) }}> Update My Profile</Nav.Link>}\r\n                        {!isMe && <Nav.Link href=\"#\" >Trust</Nav.Link>}\r\n                        {!isMe && <Nav.Link href=\"#\" >Unfollow</Nav.Link>}\r\n                        <Nav.Link href=\"#\"  onClick={() => { setAddressModal(true) }}>Copy Address to Clipboard</Nav.Link>\r\n                    </Nav>\r\n                </Navbar.Collapse>\r\n            </Navbar>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default FeedHeader\r\n","export default __webpack_public_path__ + \"static/media/loading-attachment.a3139b43.gif\";","import missingProfileImage from '../media/missing-profile-picture.png'\r\nimport loadingImageAnimation from '../media/loading-attachment.gif'\r\nimport { Dropdown, Carousel } from 'react-bootstrap'\r\nimport { useState, useEffect, useContext} from 'react'\r\nimport ApiContext from '../api/ApiContext'\r\n\r\nconst Post = ({soul}) => {\r\n    \r\n    const apiContext = useContext(ApiContext)\r\n\r\n    const [postRoot, setPostRoot] = useState({text:'loading...'})\r\n    const [attachments, setAttachments] = useState([])\r\n    const [profile, setProfile] = useState({name:'loading...', picture:null})\r\n\r\n    let eventUnSubs\r\n\r\n    useEffect(() => {\r\n\r\n        console.log('setting post event handler')\r\n        apiContext.businessLogic.subscribePost(\r\n            soul,\r\n            setPostRoot,\r\n            setAttachments, \r\n            setProfile\r\n        )\r\n        \r\n        return () => {\r\n\r\n            console.log('dropping post event handler')\r\n            if(eventUnSubs){\r\n                eventUnSubs.forEach(u => u.off())\r\n            }\r\n        \r\n        };\r\n\r\n    }, [])\r\n\r\n    const hideLoadingAnimation = (key) => {\r\n\r\n        setAttachments( (prevState) => {\r\n\r\n            //get item\r\n            const existingItem = prevState.find((p) => p.key == key)\r\n            const updatedItem = {...existingItem}\r\n            updatedItem.isLoaded = true\r\n            return ([...prevState.filter(p => p.key !== key),updatedItem].sort((a, b) => {  return b['key'] - a['key'] }))\r\n\r\n        })\r\n\r\n    }\r\n\r\n    function ProfileHeader(){\r\n        return (\r\n            <div className=\"d-flex\">\r\n                <div><img className=\"m-1 rounded-corners\" height=\"40\" width=\"40\" src={profile ? profile.picture : 'missing'} onError={(e)=>{e.target.onerror = null; e.target.src=missingProfileImage}} /></div>\r\n                <div className=\"align-self-center\" style={{'fontWeight':700, 'fontSize':'20px'}}>{profile ? profile.name : 'loading...'}</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    function ImageSpot(){\r\n\r\n        if(!attachments.length){\r\n            //no images\r\n            return(null);\r\n        }\r\n\r\n        if(attachments.length == 1){\r\n\r\n            //single picture\r\n            return (\r\n                <>\r\n                    {!attachments[0].isLoaded && <img className=\"img-fluid mx-auto d-block max-height-75\" src={loadingImageAnimation}/>}\r\n                    <img src={attachments[0].url} className=\"img-fluid mx-auto d-block max-height-75\" onLoad={() => { \r\n                        if(!attachments[0].isLoaded){hideLoadingAnimation(attachments[0].key)}\r\n                    }} />\r\n                </>\r\n            );\r\n\r\n        } else {\r\n\r\n            //multiple pictures\r\n            return (\r\n                <Carousel className=\"bg-dark\">\r\n                    {attachments.map((picture, index) => (\r\n                        <Carousel.Item key={index}>\r\n                            {!attachments[0].isLoaded && <img className=\"img-fluid mx-auto d-block max-height-75\" src={loadingImageAnimation}/>}\r\n                            <img src={picture.url} className=\"img-fluid mx-auto d-block max-height-75\" onLoad={() => { \r\n                                if(!attachments[0].isLoaded){hideLoadingAnimation(picture.key)}\r\n                            }} />\r\n                        </Carousel.Item>\r\n                    ))}\r\n                </Carousel>\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n\r\n            <div className=\"border m-3 d-flex flex-column bg-light rounded-corners\">\r\n        \r\n                {!soul && <ProfileHeader/>}\r\n        \r\n                <div className=\"d-flex m-1\">\r\n                    <div className=\"flex-grow-1\" style={{'maxHeight':'50vh', overflow: 'auto', overflowWrap: 'anywhere', 'fontWeight':700, 'fontSize':'15px'}}>{postRoot.text}</div>\r\n                </div>\r\n\r\n                <ImageSpot/>\r\n                \r\n                <div className=\"d-flex m-1\">\r\n                    <div style={{'fontWeight':700, 'fontSize':'10px'}}>{Date(postRoot.created)}</div>\r\n                    <div className=\"flex-grow-1\"></div>\r\n                    <div>\r\n                        <Dropdown>\r\n                            <Dropdown.Toggle className=\"btn-sm\">action</Dropdown.Toggle>\r\n                            <Dropdown.Menu>\r\n                                <Dropdown.Item>Make Private</Dropdown.Item>\r\n                                {apiContext.businessLogic.isMine(soul) && <Dropdown.Item onClick={() => apiContext.businessLogic.deletePost(soul)}>Delete</Dropdown.Item>}\r\n                                <Dropdown.Item>Share</Dropdown.Item>\r\n                            </Dropdown.Menu>\r\n                        </Dropdown>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default Post\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport ApiContext from \"../api/ApiContext\"\r\nimport Post from './Post'\r\n\r\nconst Posts = ({soul}) => {\r\n\r\n    const apiContext = useContext(ApiContext)\r\n    const [posts, setPosts] = useState([])\r\n\r\n    let eventUnSubs\r\n\r\n    useEffect(() => {\r\n\r\n        console.log('setting posts event handler')\r\n        \r\n        apiContext.businessLogic.subscribePosts(setPosts, soul, eventUnSubs)\r\n  \r\n        return () => {\r\n\r\n            console.log('dropping posts event handler')\r\n            if(eventUnSubs){\r\n                eventUnSubs.forEach(u => u.off())\r\n            }\r\n           \r\n        };\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"scrolling-wrapper\">\r\n            <div className=\"scrolling-content\">\r\n                {posts.map((post) => (\r\n                    <Post soul={post['_']['#']} key={post.key}/>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Posts\r\n","import FeedHeader from '../components/FeedHeader'\r\nimport Posts from '../components/Posts'\r\nimport {useParams} from 'react-router-dom';\r\n\r\nconst ProfileFeed = () => {\r\n    \r\n    let { soul } = useParams();\r\n\r\n    return (\r\n        <>\r\n        <FeedHeader soul={soul}/>\r\n        <Posts soul={soul}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProfileFeed\r\n","import React, { useState, useEffect, useContext} from 'react'\nimport { BrowserRouter, HashRouter, Redirect, Route, Switch} from 'react-router-dom'\nimport ApiContext from \"./api/ApiContext\"\nimport './App.css'\nimport Login from './pages/Login'\nimport Following from './pages/Following'\nimport Settings from './pages/Settings'\nimport Feed from './pages/Feed'\n\n\nconst App = ({baseUrl}) => {\n\n  const [isLoggedIn, setLoggedIn] = useState(false)\n  const apiContext = useContext(ApiContext)\n  const eventUnSubs = []\n\n  useEffect(() => {\n\n    apiContext.businessLogic.subscribeLogin(setLoggedIn, eventUnSubs)\n    apiContext.businessLogic.login(null, null, true)\n    window.bl = apiContext.businessLogic\n \n    return () => {\n\n      eventUnSubs.forEach(u => u.off())\n\n    };\n\n  }, []);\n\n  return (\n      <HashRouter>\n        <Switch>\n          {isLoggedIn && \n            <>\n              <Route path=\"/\" exact><Redirect to=\"/following\" /></Route>\n              <Route path=\"/following\" component={Following} />\n              <Route path=\"/feed/:soul\" component={Feed} />\n              <Route path=\"/settings\" component={Settings} />\n              <Route path=\"*\"><Redirect to=\"/following\" /></Route>\n            </>\n          }\n          {!isLoggedIn && \n            <Route path=\"*\" component={Login}/>\n          }\n        </Switch>\n      </HashRouter>\n  )\n\n}\n\nexport default App","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","class IpfsProviderGateway {\r\n\r\n    canPut = false;\r\n    canGet = true;\r\n    connectionStatus ={ connect: true, error: '' };\r\n    #gateway\r\n    \r\n    constructor(options) {\r\n    }\r\n\r\n    async connect(options) {\r\n        \r\n        if (!options || !options.gateway) {\r\n            options = { gateway: 'https://dweb.link/ipfs/' }\r\n        }\r\n\r\n        this.#gateway = options.gateway\r\n\r\n        return\r\n    }\r\n\r\n    async getFile(hash) {\r\n\r\n        if (!hash || !this.canGet) {\r\n            return\r\n        }\r\n        \r\n        return this.#gateway + hash\r\n    }\r\n\r\n    async putFile(file) {\r\n        return\r\n    }\r\n\r\n}\r\nexport default IpfsProviderGateway","const axios = require('axios');\r\n\r\nclass IpfsProviderPinata {\r\n\r\n    canPut = false;\r\n    canGet = false;\r\n    connectionStatus;\r\n    #options\r\n\r\n    constructor(options) {\r\n    }\r\n\r\n    async connect(options) {\r\n\r\n        //make sure we have the keys\r\n        if(!options || !options.pinataApiKey || !options.pinataSecretApiKey){\r\n            this.canPut = false;\r\n            this.canGet = false;\r\n            this.connectionStatus = { connect: false, error: 'missing pinata api key' };\r\n            return this.connectionStatus\r\n        }\r\n\r\n\r\n        //set gateway\r\n        options.gateway = options.gateway ? options.gateway :'https://dweb.link/ipfs/'\r\n        this.#options = options\r\n\r\n        //touch the server\r\n        const url = `https://api.pinata.cloud/data/testAuthentication`;\r\n        await axios\r\n            .get(url, {\r\n                headers: {\r\n                    pinata_api_key: this.#options.pinataApiKey,\r\n                    pinata_secret_api_key: this.#options.pinataSecretApiKey\r\n                }\r\n            })\r\n            .then( (response) => {\r\n                console.log('pinata connect response', response)\r\n                this.canPut = true;\r\n                this.canGet = true;\r\n                this.connectionStatus = { connect: true, error: response };\r\n            })\r\n            .catch( (error) => {\r\n                console.log('pinata connect error', error)\r\n                this.canPut = false;\r\n                this.canGet = true; //because we implement a gateway for pinata gets\r\n                this.connectionStatus = { connect: false, error: error };\r\n            });\r\n\r\n        return this.connectionStatus\r\n\r\n    }\r\n\r\n    async getFile(hash) {\r\n\r\n        if (!hash || !this.canGet) {\r\n            return\r\n        }\r\n\r\n        return this.#options.gateway + hash\r\n\r\n    }\r\n\r\n    async putFile(file) {\r\n\r\n        if(!file || !this.canPut){\r\n            return\r\n        }\r\n\r\n        console.log('file',file, this.#options)\r\n\r\n\r\n        const formData = new FormData();\r\n        formData.append('file', file)\r\n        console.log('data',formData)\r\n        \r\n\r\n        //const buf = await file.arrayBuffer() \r\n        const url = 'https://api.pinata.cloud/pinning/pinFileToIPFS';\r\n        const hash = await axios\r\n        .post(url, formData, {\r\n            maxContentLength: 'Infinity', //this is needed to prevent axios from erroring out with large files\r\n            headers: {\r\n                'Content-Type': `multipart/form-data; boundary=${formData._boundary}`,\r\n                //'Content-Type': 'multipart/form-data',\r\n                pinata_api_key: this.#options.pinataApiKey,\r\n                pinata_secret_api_key: this.#options.pinataSecretApiKey\r\n            }\r\n        })\r\n        .then( (response) => {\r\n            //handle response here\r\n            console.log('pinata response', response)\r\n            return response.data.IpfsHash\r\n        })\r\n        .catch((error) => {\r\n            //handle error here\r\n            console.log('pinata error', error)\r\n        });\r\n\r\n        return hash\r\n\r\n    }\r\n\r\n}\r\nexport default IpfsProviderPinata","import Gun from 'gun'\r\nimport SEA from 'gun/sea'\r\nimport IpfsProviderLocalNode from './IpfsProviders/IpfsProviderLocalNode'\r\nimport IpfsProviderGateway from './IpfsProviders/IpfsProviderGateway'\r\nimport IpfsProviderPinata from './IpfsProviders/IpfsProviderPinata'\r\nimport { PictureAsPdfSharp } from '@material-ui/icons'\r\n\r\nclass BusinessLogic {\r\n    \r\n    isLoggedIn = false;\r\n    gun;\r\n    gunUser;\r\n    gunAppRoot;\r\n    mySoul;\r\n    ipfsProvider;\r\n    #eventUnSubs = [];\r\n    #setLoggedIn\r\n    userEncPair;\r\n\r\n    constructor(gunPeer){\r\n\r\n        if (typeof Gun.SEA === 'undefined') {\r\n            console.log('setting SEA reference')\r\n            Gun.SEA = SEA;\r\n        }\r\n        this.gun = Gun(gunPeer ? gunPeer : \"https://dev.rosolalaboratories.com:4000/gun\")\r\n        this.gunUser = this.gun.user()\r\n\r\n        //setup default ipfs gateway provider while we attempt to use local ipfs node\r\n        this.ipfsProvider = new IpfsProviderGateway()\r\n        this.ipfsProvider.connect()\r\n\r\n        this.checkForLocaLIpfsNode()\r\n        \r\n        console.log('constructed')\r\n\r\n    }\r\n    \r\n    dispose(){\r\n        this.#eventUnSubs.forEach(u => u.off())\r\n    }\r\n\r\n    async getSetting(name){\r\n        \r\n        const encValue = await this.gunAppRoot.get('settings').get(name).then()\r\n        return await SEA.decrypt(encValue, this.userEncPair)\r\n    }\r\n\r\n    async setSetting(name, value){\r\n\r\n        const encValue = await SEA.encrypt(value, this.userEncPair)\r\n        return await this.gunAppRoot.get('settings').get(name).put(encValue).then()\r\n    }\r\n\r\n    async connectToPinata(){\r\n\r\n        //get keys\r\n        const pinataApiKey = await this.getSetting('pinataApiKey')\r\n        const pinataApiSecret = await this.getSetting('pinataApiSecret')\r\n\r\n        //keys exist?\r\n        if(!pinataApiKey || !pinataApiSecret){\r\n            console.log('no pinata keys found')\r\n            return false\r\n        }\r\n\r\n        //connect\r\n        const ipfs = new IpfsProviderPinata()\r\n        const result = await ipfs.connect({\r\n            pinataApiKey: pinataApiKey,\r\n            pinataSecretApiKey: pinataApiSecret\r\n        })\r\n        console.log('ipfs pinata status',result)\r\n\r\n        //change to this provider if connected\r\n        if(result.connect){\r\n            console.log('connected to local ipfs node')    \r\n            this.ipfsProvider = ipfs\r\n            return true\r\n        } else{\r\n            return false\r\n        }\r\n\r\n    }\r\n\r\n    async checkForLocaLIpfsNode(){\r\n        \r\n        const ipfs = new IpfsProviderLocalNode()\r\n        const result = await ipfs.connect()\r\n        console.log('ipfs local node status',result)\r\n\r\n        //change to this provider if connected\r\n        if(result.connect){\r\n            console.log('connected to local ipfs node')    \r\n            this.ipfsProvider = ipfs\r\n        }\r\n\r\n    }\r\n\r\n    createUser(user, password, name){\r\n\r\n        console.log('create user request')\r\n\r\n        //create\r\n        this.gunUser.create(user, password, (ack) => {\r\n\r\n            this.gunAppRoot.get('profile').put({\r\n                name: name,\r\n                picture: '',\r\n                following: '',\r\n                posts: ''\r\n            })\r\n\r\n        })\r\n\r\n    }\r\n\r\n    subscribeLogin(setLoggedIn, unSubs){\r\n\r\n        this.#setLoggedIn = setLoggedIn\r\n        unSubs = unSubs ? unSubs : []\r\n        this.gun.on('auth', async (ack) => {\r\n            \r\n            console.log('login event', ack)\r\n            this.isLoggedIn = true\r\n            this.gunAppRoot = this.gunUser.get('sovereign')\r\n            this.mySoul = this.gunUser['_'].soul\r\n            this.userEncPair = ack.sea\r\n            \r\n            //if we aren't connected to a local node, let's try to connect to pinata now\r\n            if(!this.ipfsProvider.canPut){ await this.connectToPinata()} //await it to help ensure we connect before re-rendering\r\n            \r\n            this.#setLoggedIn(true)\r\n\r\n        })\r\n        \r\n    }\r\n\r\n    login(user, password, recall){\r\n\r\n        console.log('login request')\r\n        \r\n        //recall\r\n        if(recall){\r\n            this.gunUser.recall({sessionStorage: true})\r\n        } else {\r\n            this.gunUser.auth(user, password)\r\n        }\r\n\r\n    }\r\n\r\n    logout(){\r\n\r\n        console.log('logout request')\r\n        this.gunUser.leave()\r\n        this.isLoggedIn = false\r\n        this.#setLoggedIn(false)\r\n        \r\n    }\r\n\r\n    getTimeElapsed(time){\r\n        \r\n        const now = new Date().getTime()\r\n        const diff = now - time\r\n\r\n        if(diff < 60000){\r\n            return 'just now'\r\n        }else if(diff < 3600000){\r\n            return Math.round(diff/60000) + ' mins'\r\n        }else if(diff < 86400000){\r\n            return Math.round(diff/3600000) + ' hrs'\r\n        }else if(diff < 604800000){\r\n            return Math.round(diff/86400000) + ' days'\r\n        }else if(diff < 2629743831.225){\r\n            return Math.round(diff/604800000) + ' wks'\r\n        }else if(diff < 31556925974.7){\r\n            return Math.round(diff/2629743831.225) + ' mos'\r\n        }else {\r\n            return 'long ago'\r\n        }\r\n    }\r\n\r\n    async subscribeTimeElapsed(time, setElapsed, unSubs){\r\n\r\n        unSubs = unSubs ? unSubs : []\r\n\r\n        const intervalId = setInterval(setElapsed(this.getTimeElapsed(time)),120000)\r\n        \r\n        const unSub = {}\r\n        unSub.off = () => {clearInterval(intervalId)}\r\n        unSubs.push(unSub)\r\n\r\n    }\r\n\r\n    //* Utility function to parse user from a soul\r\n    parseUserFromSoul(soul){\r\n\r\n        if(!soul){return}\r\n        var patt = /^~[^/]*/;\r\n        var result = soul.match(patt);\r\n        if(result.length == 0){return}\r\n        return result[0]\r\n    }\r\n    \r\n    //* Utility function to parse content id from a soul\r\n    parseIDFromSoul(soul){\r\n      \r\n        if(!soul){return}\r\n        var patt = /[^/]*$/;\r\n        var result = soul.match(patt);\r\n        if(result.length == 0){return}\r\n        return result[0]\r\n      \r\n    }\r\n\r\n    isMine(soul){\r\n        return this.parseUserFromSoul(soul) == this.gunUser['_'].soul\r\n    }\r\n\r\n    getMaxTimeStampOfNode(value){\r\n\r\n        if (!value || !value['_'] || !value['_']['>']){ return 0}\r\n\r\n        //get max timestamp of properties (being careful to avoid prototype and any possible non numerics that could somehow be picked up)\r\n        let maxTimeStamp = 0\r\n        for (const prop in value['_']['>']){\r\n            if(value.hasOwnProperty(prop) && !isNaN(value[prop])){\r\n                maxTimeStamp = Math.max(maxTimeStamp,value[prop])\r\n            }\r\n        }\r\n        return maxTimeStamp\r\n\r\n    }\r\n\r\n    manageArrayState(prevState, value, key, sortBy){\r\n\r\n        //check to see if item exists already\r\n        const existingIndex = prevState.findIndex(p => p.key === key)\r\n        //console.log('existing index', existingIndex)\r\n        if (existingIndex == -1 && !value){\r\n            //deleting something that isn't on the list, ignore it\r\n            return prevState\r\n        }\r\n\r\n        if (existingIndex == -1) {\r\n\r\n            //new, add item item to state\r\n            //console.log('adding item')\r\n            const newItem = {...value}\r\n            newItem.key = key\r\n\r\n            //sort the new item into the array\r\n            return [...prevState, newItem].sort((a, b) => { return b[sortBy] - a[sortBy] })\r\n\r\n        } else {\r\n\r\n            //yes, a item with this id exists...\r\n            //console.log('existing item')\r\n\r\n            //is this an update to delete it?\r\n            if (!value) {\r\n\r\n                //yes, delete it\r\n                console.log('deleting item')\r\n                return prevState.filter(p => p.key !== key)\r\n\r\n            } else {\r\n\r\n                //No, has it changed?\r\n                const existingItem = prevState[existingIndex]\r\n                if (this.getMaxTimeStampOfNode(value) > this.getMaxTimeStampOfNode(existingItem)) {\r\n\r\n                    //yes, update it\r\n                    //console.log('updating item')\r\n                    const updatedItem = {...value}\r\n                    updatedItem.key = key\r\n                    return ([...prevState.filter(p => p.key !== key),updatedItem].sort((a, b) => {  return b[sortBy] - a[sortBy] }))\r\n\r\n                } else {\r\n\r\n                    //dupe, ignore this event\r\n                    //console.log('ignoring item')\r\n                    return prevState\r\n\r\n                }\r\n            }\r\n\r\n   }\r\n\r\n\r\n    }\r\n\r\n    async followUser(soul){\r\n        \r\n        //ensure soul is just for the user\r\n        soul = this.parseUserFromSoul(soul)\r\n\r\n        //get user referecne\r\n        const userRef = this.gun.get(soul)\r\n\r\n        //follow user\r\n        this.gunAppRoot.get('following').get(soul).put({ \r\n            trusted: false, \r\n            mute: false,\r\n            key: soul\r\n        }).get('user').put(userRef);\r\n        \r\n    }\r\n\r\n    async createPost(post, pictures){\r\n        \r\n        //create new post\r\n        const created = new Date().getTime()\r\n        const key = created + '_' + this.mySoul\r\n        this.gunAppRoot.get('posts').get(key).put({\r\n            text: post.text,\r\n            created: created,\r\n            modified: created,\r\n            key: key\r\n        }).once(async (data) => {\r\n            \r\n            //get the post and add ref to profile as last post\r\n            const postRef = this.gunAppRoot.get('posts').get(key)\r\n            this.gunAppRoot.get('profile').get('lastPost').put(postRef)\r\n\r\n            //add attachments\r\n            if(pictures && pictures.length){\r\n                pictures.forEach(async pic => {\r\n                    const picHash = await this.ipfsProvider.putFile(pic)\r\n                    postRef.get('attachments').set(picHash)\r\n                });\r\n            }\r\n\r\n        })\r\n\r\n    }\r\n\r\n    async deletePost(soul){\r\n        \r\n        //need to update last post in profile?\r\n        const lastPostKey = await this.gunAppRoot.get('profile').get('lastPost').then()\r\n        const deletedPostKey = await this.gun.get(soul).get('key').then()\r\n        if(lastPostKey && lastPostKey == deletedPostKey){\r\n            this.gunAppRoot.get('profile').get('lastPost').put(false)\r\n        }\r\n        \r\n        //delete\r\n        //this.gun.get(soul).put(null)\r\n        const id = this.parseIDFromSoul(soul)\r\n        this.gunAppRoot.get('posts').get(id).put(null)\r\n        \r\n    }\r\n\r\n    async getPicture(hash){\r\n\r\n        const file = await this.ipfsProvider.getFile(hash)\r\n        return file\r\n\r\n    }\r\n\r\n    async getProfile(soul, cb){\r\n\r\n        //if no soul provided assume user's soul\r\n        if(!soul){\r\n\r\n            //return users profile\r\n            return this.gunUser.get('sovereign').get('profile').once(cb)\r\n\r\n        } else {\r\n\r\n            //ensure soul is just for the user\r\n            soul = this.parseUserFromSoul(soul)\r\n\r\n            //get profile reference\r\n            return this.gun.get(soul).get('sovereign').get('profile').once(cb)\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async updateProfile(profile, picture){\r\n\r\n        if(picture){\r\n            profile.picture = await this.ipfsProvider.putFile(picture)\r\n        }\r\n\r\n        //update profile\r\n        return this.gunUser.get('sovereign').get('profile').put(profile)\r\n        \r\n    }\r\n\r\n    async subscribePosts(setPosts, soul, unSubs){\r\n\r\n        //track events to unsub\r\n        unSubs = unSubs ? unSubs : []\r\n\r\n        //single user or following (plus self)?\r\n        if(soul){\r\n\r\n            //handle updates to the posts of a single users\r\n            this.gun.get(soul).get('sovereign').get('posts').map().on(\r\n                (value, key, _msg, _ev) =>  {\r\n                    if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                    setPosts(prevState => this.manageArrayState(prevState, value, key, 'created'))\r\n                }\r\n            )  \r\n\r\n        }else{\r\n\r\n            //handle my own posts\r\n            this.gunAppRoot.get('following').map().get('user').get('sovereign').get('posts').map().on(\r\n                (value, key, _msg, _ev) =>  {\r\n                    if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                    setPosts(prevState => this.manageArrayState(prevState, value, key, 'created'))\r\n                }\r\n            )       \r\n            \r\n            //handle updates to the posts of the users I follow\r\n            this.gunAppRoot.get('following').map().get('user').get('sovereign').get('posts').map().on(\r\n                (value, key, _msg, _ev) =>  {\r\n                    if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                    setPosts(prevState => this.manageArrayState(prevState, value, key, 'created'))\r\n                }\r\n            )                \r\n\r\n        }\r\n    }\r\n\r\n    async subscribeProfiles(setProfiles, unSubs){\r\n\r\n        //track events to unsub\r\n        unSubs = unSubs ? unSubs : []\r\n\r\n        //handle updates to the profiles of the users I follow\r\n        this.gunAppRoot.get('following').map().on(\r\n            async (value, key, _msg, _ev) => {\r\n                \r\n                if(!unSubs.includes(_ev)){unSubs.push(_ev)}   \r\n                \r\n                //add a value to sort on\r\n                if(value){\r\n                    value.sort = await this.gunAppRoot.get('following').get(key).get('user').get('sovereign').get('profile').get('lastPost').get('created').then()\r\n                }\r\n                \r\n                setProfiles(prevState => this.manageArrayState(prevState, value, key, 'sort'))\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    async subscribeProfile(soul, setProfile, setProfilePic, setFollowing, setLastPost, unSubs){\r\n\r\n        //track events to unsub\r\n        unSubs = unSubs ? unSubs : []\r\n        \r\n        //get profile\r\n        if(setProfile){\r\n            this.gun.get(soul).get('sovereign').get('profile').on(\r\n                (value, key, _msg, _ev) => {\r\n                    if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                    setProfile({...value})\r\n                }\r\n            )\r\n        }\r\n        if(setProfilePic){\r\n            this.gun.get(soul).get('sovereign').get('profile').get('picture').on(\r\n                async(value, key, _msg, _ev) => {\r\n                    if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                    setProfilePic(await this.getPicture(value))\r\n                    console.log('set profile pic event')\r\n                }\r\n            )\r\n        }\r\n\r\n        //get following\r\n        if(!this.isMine(soul) && setFollowing){\r\n            this.gunAppRoot.get('following').get(soul).on(\r\n                (value, key, _msg, _ev) => {\r\n                    if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                    setFollowing({...value}) \r\n                }\r\n            )   \r\n        }\r\n\r\n        //get last post\r\n        if(setLastPost){\r\n            this.gun.get(soul).get('sovereign').get('profile').get('lastPost').on(\r\n                (value, key, _msg, _ev) => {\r\n                    if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                    setLastPost({...value})\r\n                }\r\n            )\r\n        }\r\n\r\n    }\r\n\r\n    async subscribePost(soul, setPost, setAttachments, setProfile, unSubs){\r\n\r\n        //track events to unsub\r\n        unSubs = unSubs ? unSubs : []\r\n\r\n        //get post\r\n        this.gun.get(soul).on(\r\n            (value, key, _msg, _ev) => {\r\n                if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                setPost({...value})\r\n            }\r\n        )\r\n        \r\n        //get attachments\r\n        this.gun.get(soul).get('attachments').map().on(\r\n            async (value, key, _msg, _ev) => {\r\n                if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                const attachment = {\r\n                    mime: 'image/*',\r\n                    url: await this.getPicture(value)\r\n                }\r\n                setAttachments(prevState => this.manageArrayState(prevState, attachment, key, 'key'))\r\n            }\r\n        )\r\n\r\n        //get profile of the poster\r\n        this.gun.get(this.parseUserFromSoul(soul)).get('sovereign').get('profile').on(\r\n            (value, key, _msg, _ev) => {\r\n                if(!unSubs.includes(_ev)){unSubs.push(_ev)}\r\n                setProfile({...value})\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n}\r\nexport default BusinessLogic","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ApiContext from \"./api/ApiContext\"\nimport BusinessLogic from './api/BusinessLogic'\n\n  //because this application can be served up anywhere, lets figure out where we are:\n  const path = window.location.pathname\n  const root = path.indexOf('/sovereign')\n  const base = root == -1 ? '' : path.substring(0,root)\n  console.log('base',base)\n\nReactDOM.render(\n  <React.StrictMode>\n    <div className=\"screen-wrapper\">\n    <ApiContext.Provider value={{businessLogic: new BusinessLogic()}}>\n    <App baseUrl={base}/>\n    </ApiContext.Provider>\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}